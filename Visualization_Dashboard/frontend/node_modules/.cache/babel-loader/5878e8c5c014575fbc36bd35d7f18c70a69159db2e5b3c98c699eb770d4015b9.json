{"ast":null,"code":"import React from'react';import{BrowserRouter as Router,Routes,Route,Navigate}from'react-router-dom';import Login from'./components/Login';import Chat from'./components/Chat';import Dashboard from'./components/Dashboard';import{AuthProvider,useAuth}from'./context/AuthContext';// PrivateRoute component using React Router v6 pattern\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const PrivateRoute=_ref=>{let{children}=_ref;const{user,loading}=useAuth();if(loading){return/*#__PURE__*/_jsx(\"div\",{children:\"Loading...\"});}if(!user){return/*#__PURE__*/_jsx(Navigate,{to:\"/login\",replace:true});}return children;};// Component to handle role-based routing\nconst RoleRoute=_ref2=>{let{children,allowedRole}=_ref2;const{user}=useAuth();if((user===null||user===void 0?void 0:user.role)!==allowedRole){return/*#__PURE__*/_jsx(Navigate,{to:(user===null||user===void 0?void 0:user.role)==='client'?'/dashboard':'/chat',replace:true});}return children;};// Root redirect component\nconst RootRedirect=()=>{const{user}=useAuth();return/*#__PURE__*/_jsx(Navigate,{to:(user===null||user===void 0?void 0:user.role)==='client'?'/dashboard':'/chat',replace:true});};function App(){return/*#__PURE__*/_jsx(AuthProvider,{children:/*#__PURE__*/_jsx(Router,{children:/*#__PURE__*/_jsxs(Routes,{children:[/*#__PURE__*/_jsx(Route,{path:\"/login\",element:/*#__PURE__*/_jsx(Login,{})}),/*#__PURE__*/_jsx(Route,{path:\"/chat\",element:/*#__PURE__*/_jsx(PrivateRoute,{children:/*#__PURE__*/_jsx(RoleRoute,{allowedRole:\"customer\",children:/*#__PURE__*/_jsx(Chat,{})})})}),/*#__PURE__*/_jsx(Route,{path:\"/dashboard\",element:/*#__PURE__*/_jsx(PrivateRoute,{children:/*#__PURE__*/_jsx(RoleRoute,{allowedRole:\"client\",children:/*#__PURE__*/_jsx(Dashboard,{})})})}),/*#__PURE__*/_jsx(Route,{path:\"/\",element:/*#__PURE__*/_jsx(PrivateRoute,{children:/*#__PURE__*/_jsx(RootRedirect,{})})}),/*#__PURE__*/_jsx(Route,{path:\"*\",element:/*#__PURE__*/_jsx(Navigate,{to:\"/login\",replace:true})})]})})});}export default App;","map":{"version":3,"names":["React","BrowserRouter","Router","Routes","Route","Navigate","Login","Chat","Dashboard","AuthProvider","useAuth","jsx","_jsx","jsxs","_jsxs","PrivateRoute","_ref","children","user","loading","to","replace","RoleRoute","_ref2","allowedRole","role","RootRedirect","App","path","element"],"sources":["C:/Users/Dell/OneDrive/Desktop/new/frontend/src/App.js"],"sourcesContent":["import React from 'react';\nimport { BrowserRouter as Router, Routes, Route, Navigate } from 'react-router-dom';\nimport Login from './components/Login';\nimport Chat from './components/Chat';\nimport Dashboard from './components/Dashboard';\nimport { AuthProvider, useAuth } from './context/AuthContext';\n\n// PrivateRoute component using React Router v6 pattern\nconst PrivateRoute = ({ children }) => {\n  const { user, loading } = useAuth();\n\n  if (loading) {\n    return <div>Loading...</div>;\n  }\n\n  if (!user) {\n    return <Navigate to=\"/login\" replace />;\n  }\n\n  return children;\n};\n\n// Component to handle role-based routing\nconst RoleRoute = ({ children, allowedRole }) => {\n  const { user } = useAuth();\n\n  if (user?.role !== allowedRole) {\n    return <Navigate to={user?.role === 'client' ? '/dashboard' : '/chat'} replace />;\n  }\n\n  return children;\n};\n\n// Root redirect component\nconst RootRedirect = () => {\n  const { user } = useAuth();\n  return <Navigate to={user?.role === 'client' ? '/dashboard' : '/chat'} replace />;\n};\n\nfunction App() {\n  return (\n    <AuthProvider>\n      <Router>\n        <Routes>\n          {/* Public route - Login */}\n          <Route path=\"/login\" element={<Login />} />\n\n          {/* Protected route - Chat (for customers) */}\n          <Route\n            path=\"/chat\"\n            element={\n              <PrivateRoute>\n                <RoleRoute allowedRole=\"customer\">\n                  <Chat />\n                </RoleRoute>\n              </PrivateRoute>\n            }\n          />\n\n          {/* Protected route - Dashboard (for clients) */}\n          <Route\n            path=\"/dashboard\"\n            element={\n              <PrivateRoute>\n                <RoleRoute allowedRole=\"client\">\n                  <Dashboard />\n                </RoleRoute>\n              </PrivateRoute>\n            }\n          />\n\n          {/* Root route - Redirect based on role */}\n          <Route\n            path=\"/\"\n            element={\n              <PrivateRoute>\n                <RootRedirect />\n              </PrivateRoute>\n            }\n          />\n\n          {/* Fallback route */}\n          <Route path=\"*\" element={<Navigate to=\"/login\" replace />} />\n        </Routes>\n      </Router>\n    </AuthProvider>\n  );\n}\n\nexport default App;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}