{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Dell\\\\OneDrive\\\\Desktop\\\\new\\\\frontend\\\\src\\\\components\\\\charts\\\\RegionChart.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useRef, useState } from 'react';\nimport * as d3 from 'd3';\nimport api from '../../services/api';\nimport CardContainer from '../common/CardContainer';\nimport Loader from '../common/Loader';\nimport NoDataMessage from '../common/NoDataMessage';\nimport { createTooltip, formatNumber } from '../../utils/helpers';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst RegionChart = () => {\n  _s();\n  const [data, setData] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  const [metric, setMetric] = useState('count'); // 'count', 'intensity', 'likelihood', 'relevance'\n  const [filteredData, setFilteredData] = useState(null);\n  const [filter, setFilter] = useState(''); // Filter by region\n  const [regions, setRegions] = useState([]); // Available regions for filtering\n  const [selectedRegionInfo, setSelectedRegionInfo] = useState(null); // To display sources and topics\n  const svgRef = useRef(null);\n  const containerRef = useRef(null);\n\n  // Fetch regions for filter dropdown\n  useEffect(() => {\n    const fetchFilters = async () => {\n      try {\n        const filtersData = await api.getFilters();\n        setRegions(filtersData.regions || []);\n      } catch (err) {\n        console.error('Error fetching filter options:', err);\n      }\n    };\n    fetchFilters();\n  }, []);\n\n  // Fetch region data based on filter\n  useEffect(() => {\n    const fetchRegionData = async () => {\n      try {\n        setLoading(true);\n        const filters = filter ? {\n          region: filter\n        } : {};\n        const regionData = await api.getRegions(filters);\n        setData(regionData);\n\n        // Set filtered data\n        if (filter) {\n          // Find the selected region data to display sources and topics\n          const selectedRegion = regionData.find(r => r.region === filter);\n          if (selectedRegion) {\n            setSelectedRegionInfo(selectedRegion);\n          }\n          setFilteredData(regionData.filter(d => d.region === filter));\n        } else {\n          setFilteredData(regionData);\n          setSelectedRegionInfo(null);\n        }\n        setLoading(false);\n      } catch (err) {\n        console.error('Error fetching region data:', err);\n        setError('Failed to load region data');\n        setLoading(false);\n      }\n    };\n    fetchRegionData();\n  }, [filter]);\n  useEffect(() => {\n    if (filteredData && filteredData.length > 0 && !loading) {\n      renderChart();\n    }\n  }, [filteredData, loading, metric]);\n  useEffect(() => {\n    // Add resize listener\n    const handleResize = () => {\n      if (filteredData && filteredData.length > 0 && !loading) {\n        renderChart();\n      }\n    };\n    window.addEventListener('resize', handleResize);\n    return () => window.removeEventListener('resize', handleResize);\n  }, [filteredData, loading, metric]);\n  const renderChart = () => {\n    if (!svgRef.current || !containerRef.current) return;\n\n    // Clear previous chart\n    d3.select(svgRef.current).selectAll('*').remove();\n\n    // Set dimensions\n    const containerWidth = containerRef.current.clientWidth;\n    const margin = {\n      top: 30,\n      right: 20,\n      bottom: 80,\n      left: 60\n    };\n    const width = containerWidth - margin.left - margin.right;\n    const height = 400 - margin.top - margin.bottom;\n\n    // Process and sort data\n    const processedData = [...filteredData].filter(d => d.region && d.region !== 'Unknown' && d[metric] > 0).sort((a, b) => b[metric] - a[metric]);\n\n    // Create SVG\n    const svg = d3.select(svgRef.current).attr('width', width + margin.left + margin.right).attr('height', height + margin.top + margin.bottom).append('g').attr('transform', `translate(${margin.left},${margin.top})`);\n\n    // Create tooltip\n    const tooltip = createTooltip(d3);\n\n    // Create scales\n    const x = d3.scaleBand().domain(processedData.map(d => d.region)).range([0, width]).padding(0.3);\n    const y = d3.scaleLinear().domain([0, d3.max(processedData, d => d[metric]) * 1.1]).nice().range([height, 0]);\n\n    // Create gradient for bars\n    const defs = svg.append('defs');\n    const gradient = defs.append('linearGradient').attr('id', 'region-bar-gradient').attr('gradientUnits', 'userSpaceOnUse').attr('x1', 0).attr('y1', height).attr('x2', 0).attr('y2', 0);\n    gradient.append('stop').attr('offset', '0%').attr('stop-color', '#3182bd');\n    gradient.append('stop').attr('offset', '100%').attr('stop-color', '#6baed6');\n\n    // Add X axis without labels (they will show only on hover)\n    const xAxis = svg.append('g').attr('class', 'axis x-axis').attr('transform', `translate(0,${height})`).call(d3.axisBottom(x).tickSize(0).tickFormat(''));\n\n    // Add only a single line for X axis\n    xAxis.select('.domain').attr('stroke', '#ccc');\n\n    // Add Y axis with only min and max values\n    const yAxisValues = [0, d3.max(processedData, d => d[metric])];\n    const yAxis = svg.append('g').attr('class', 'axis y-axis').call(d3.axisLeft(y).tickValues(yAxisValues).tickFormat(d => formatNumber(d)));\n\n    // Add Y axis label\n    svg.append('text').attr('class', 'axis-label').attr('transform', 'rotate(-90)').attr('y', -margin.left + 15).attr('x', -height / 2).attr('dy', '1em').attr('text-anchor', 'middle').text(metric === 'count' ? 'Number of Events' : metric.charAt(0).toUpperCase() + metric.slice(1));\n\n    // Create horizontal bars with rounded corners\n    const bars = svg.selectAll('.bar').data(processedData).enter().append('rect').attr('class', 'bar').attr('x', d => x(d.region)).attr('width', x.bandwidth()).attr('y', height).attr('height', 0).attr('rx', 4).attr('ry', 4).attr('fill', 'url(#region-bar-gradient)').on('mouseover', function (event, d) {\n      // Highlight bar\n      d3.select(this).transition().duration(300).attr('opacity', 0.8).attr('stroke', '#2c3e50').attr('stroke-width', 2);\n\n      // Show tooltip with region name, value, and sources/topics\n      tooltip.transition().duration(200).style('opacity', 0.9);\n      let tooltipContent = `\n          <strong>${d.region}</strong><br/>\n          ${metric === 'count' ? 'Count' : metric.charAt(0).toUpperCase() + metric.slice(1)}: ${formatNumber(d[metric])}\n        `;\n\n      // Add percentage if it's count metric\n      if (metric === 'count') {\n        const total = processedData.reduce((sum, item) => sum + item.count, 0);\n        const percentage = (d.count / total * 100).toFixed(1);\n        tooltipContent += `<br/>Percentage: ${percentage}%`;\n      }\n\n      // Add sources and topics info if available\n      if (d.sources && d.sources.length > 0) {\n        tooltipContent += `<br/><br/><strong>Top Sources:</strong> ${d.sources.slice(0, 3).join(', ')}`;\n        if (d.sources.length > 3) {\n          tooltipContent += ` and ${d.sources.length - 3} more`;\n        }\n      }\n      if (d.topics && d.topics.length > 0) {\n        tooltipContent += `<br/><strong>Top Topics:</strong> ${d.topics.slice(0, 3).join(', ')}`;\n        if (d.topics.length > 3) {\n          tooltipContent += ` and ${d.topics.length - 3} more`;\n        }\n      }\n      tooltip.html(tooltipContent).style('left', event.pageX + 10 + 'px').style('top', event.pageY - 28 + 'px');\n\n      // Show region name temporarily below the bar\n      svg.append('text').attr('class', 'temp-region-label').attr('x', x(d.region) + x.bandwidth() / 2).attr('y', height + 20).attr('text-anchor', 'middle').attr('font-size', '12px').text(d.region);\n    }).on('mouseout', function () {\n      // Restore bar appearance\n      d3.select(this).transition().duration(300).attr('opacity', 1).attr('stroke', 'none');\n\n      // Hide tooltip\n      tooltip.transition().duration(500).style('opacity', 0);\n\n      // Remove temporary region label\n      svg.selectAll('.temp-region-label').remove();\n    }).on('click', function (event, d) {\n      // Show region name temporarily below the bar (persists until another bar is clicked)\n      svg.selectAll('.clicked-region-label').remove();\n      svg.append('text').attr('class', 'clicked-region-label').attr('x', x(d.region) + x.bandwidth() / 2).attr('y', height + 20).attr('text-anchor', 'middle').attr('font-size', '12px').attr('font-weight', 'bold').text(d.region);\n\n      // Set selected region to display info\n      setSelectedRegionInfo(d);\n    });\n\n    // Animate bars on load\n    bars.transition().duration(800).delay((d, i) => i * 50).attr('y', d => y(d[metric])).attr('height', d => height - y(d[metric]));\n\n    // Add value labels on top of bars\n    svg.selectAll('.bar-label').data(processedData).enter().append('text').attr('class', 'bar-label').attr('x', d => x(d.region) + x.bandwidth() / 2).attr('y', d => y(d[metric]) - 5).attr('text-anchor', 'middle').attr('font-size', '11px').attr('opacity', 0).text(d => formatNumber(d[metric])).transition().duration(800).delay((d, i) => 800 + i * 50).attr('opacity', 1);\n\n    // Display region names below chart when filtered\n    if (filter) {\n      svg.selectAll('.region-label').data(processedData).enter().append('text').attr('class', 'region-label').attr('x', d => x(d.region) + x.bandwidth() / 2).attr('y', height + 20).attr('text-anchor', 'middle').attr('font-size', '12px').attr('font-weight', 'bold').text(d => d.region);\n    }\n  };\n  const handleMetricChange = newMetric => {\n    // Animate transition between metrics\n    d3.selectAll('.bar').transition().duration(500).attr('y', svgRef.current.clientHeight).attr('height', 0).on('end', () => {\n      setMetric(newMetric);\n    });\n  };\n\n  // Reset filter\n  const handleReset = () => {\n    setFilter('');\n    setSelectedRegionInfo(null);\n  };\n\n  // Render source and topic info when a region is selected\n  const renderRegionInfo = () => {\n    if (!selectedRegionInfo) return null;\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"region-details\",\n      children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n        children: [\"Information for \", selectedRegionInfo.region]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 333,\n        columnNumber: 9\n      }, this), selectedRegionInfo.sources && selectedRegionInfo.sources.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"info-section\",\n        children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n          children: \"Sources:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 337,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"tag-container\",\n          children: selectedRegionInfo.sources.map((source, idx) => /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"info-tag source-tag\",\n            children: source\n          }, `source-${idx}`, false, {\n            fileName: _jsxFileName,\n            lineNumber: 340,\n            columnNumber: 17\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 338,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 336,\n        columnNumber: 11\n      }, this), selectedRegionInfo.topics && selectedRegionInfo.topics.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"info-section\",\n        children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n          children: \"Topics:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 348,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"tag-container\",\n          children: selectedRegionInfo.topics.map((topic, idx) => /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"info-tag topic-tag\",\n            children: topic\n          }, `topic-${idx}`, false, {\n            fileName: _jsxFileName,\n            lineNumber: 351,\n            columnNumber: 17\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 349,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 347,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 332,\n      columnNumber: 7\n    }, this);\n  };\n  const actionButtons = /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"chart-actions\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"filter-controls\",\n      children: [/*#__PURE__*/_jsxDEV(\"select\", {\n        className: \"region-filter\",\n        value: filter,\n        onChange: e => setFilter(e.target.value),\n        children: [/*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"\",\n          children: \"All Regions\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 368,\n          columnNumber: 11\n        }, this), regions.map((region, idx) => /*#__PURE__*/_jsxDEV(\"option\", {\n          value: region,\n          children: region\n        }, idx, false, {\n          fileName: _jsxFileName,\n          lineNumber: 370,\n          columnNumber: 13\n        }, this))]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 363,\n        columnNumber: 9\n      }, this), filter && /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"reset-filter-btn\",\n        onClick: handleReset,\n        children: \"Reset\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 374,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 362,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      className: `chart-action-btn ${metric === 'count' ? 'active' : ''}`,\n      onClick: () => handleMetricChange('count'),\n      title: \"Event Count\",\n      children: \"Count\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 380,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      className: `chart-action-btn ${metric === 'intensity' ? 'active' : ''}`,\n      onClick: () => handleMetricChange('intensity'),\n      title: \"Intensity\",\n      children: \"Intensity\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 387,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      className: `chart-action-btn ${metric === 'likelihood' ? 'active' : ''}`,\n      onClick: () => handleMetricChange('likelihood'),\n      title: \"Likelihood\",\n      children: \"Likelihood\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 394,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      className: `chart-action-btn ${metric === 'relevance' ? 'active' : ''}`,\n      onClick: () => handleMetricChange('relevance'),\n      title: \"Relevance\",\n      children: \"Relevance\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 401,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      className: \"refresh-btn\",\n      onClick: () => {\n        setLoading(true);\n        const filters = filter ? {\n          region: filter\n        } : {};\n        api.getRegions(filters).then(data => {\n          setData(data);\n          setFilteredData(filter ? data.filter(d => d.region === filter) : data);\n          setLoading(false);\n        }).catch(err => {\n          setError('Failed to reload data');\n          setLoading(false);\n        });\n      },\n      children: /*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"refresh-icon\",\n        children: \"\\u21BB\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 423,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 408,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 361,\n    columnNumber: 5\n  }, this);\n\n  // Add some CSS for the new components\n  const styles = `\n    <style>\n      .filter-controls {\n        display: flex;\n        align-items: center;\n        margin-right: 15px;\n      }\n      \n      .region-filter {\n        padding: 6px 10px;\n        border-radius: 4px;\n        border: 1px solid #ccc;\n        margin-right: 10px;\n      }\n      \n      .reset-filter-btn {\n        background-color: #f1f1f1;\n        border: 1px solid #ddd;\n        border-radius: 4px;\n        padding: 6px 10px;\n        cursor: pointer;\n      }\n      \n      .reset-filter-btn:hover {\n        background-color: #e0e0e0;\n      }\n      \n      .region-details {\n        margin-top: 20px;\n        padding: 15px;\n        background-color: #f9f9f9;\n        border-radius: 8px;\n        border: 1px solid #e0e0e0;\n      }\n      \n      .info-section {\n        margin-bottom: 15px;\n      }\n      \n      .info-section h5 {\n        margin-bottom: 8px;\n        color: #333;\n      }\n      \n      .tag-container {\n        display: flex;\n        flex-wrap: wrap;\n        gap: 8px;\n      }\n      \n      .info-tag {\n        display: inline-block;\n        padding: 4px 10px;\n        border-radius: 16px;\n        font-size: 12px;\n        color: white;\n      }\n      \n      .source-tag {\n        background-color: #3498db;\n      }\n      \n      .topic-tag {\n        background-color: #2ecc71;\n      }\n    </style>\n  `;\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      dangerouslySetInnerHTML: {\n        __html: styles\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 499,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(CardContainer, {\n      title: `Region Distribution ${filter ? `- ${filter}` : ''}`,\n      actionButtons: actionButtons,\n      children: loading ? /*#__PURE__*/_jsxDEV(Loader, {\n        message: \"Loading region data...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 502,\n        columnNumber: 11\n      }, this) : error ? /*#__PURE__*/_jsxDEV(NoDataMessage, {\n        message: error,\n        icon: \"\\u26A0\\uFE0F\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 504,\n        columnNumber: 11\n      }, this) : !filteredData || filteredData.length === 0 ? /*#__PURE__*/_jsxDEV(NoDataMessage, {\n        message: filter ? `No data available for region: ${filter}` : \"No region data available\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 506,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"chart-container\",\n          ref: containerRef,\n          children: /*#__PURE__*/_jsxDEV(\"svg\", {\n            ref: svgRef,\n            className: \"region-chart\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 510,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 509,\n          columnNumber: 13\n        }, this), selectedRegionInfo && renderRegionInfo()]\n      }, void 0, true)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 500,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n};\n_s(RegionChart, \"s22kKmfZX6qScHVXyUorbRWBeng=\");\n_c = RegionChart;\nexport default RegionChart;\nvar _c;\n$RefreshReg$(_c, \"RegionChart\");","map":{"version":3,"names":["React","useEffect","useRef","useState","d3","api","CardContainer","Loader","NoDataMessage","createTooltip","formatNumber","jsxDEV","_jsxDEV","Fragment","_Fragment","RegionChart","_s","data","setData","loading","setLoading","error","setError","metric","setMetric","filteredData","setFilteredData","filter","setFilter","regions","setRegions","selectedRegionInfo","setSelectedRegionInfo","svgRef","containerRef","fetchFilters","filtersData","getFilters","err","console","fetchRegionData","filters","region","regionData","getRegions","selectedRegion","find","r","d","length","renderChart","handleResize","window","addEventListener","removeEventListener","current","select","selectAll","remove","containerWidth","clientWidth","margin","top","right","bottom","left","width","height","processedData","sort","a","b","svg","attr","append","tooltip","x","scaleBand","domain","map","range","padding","y","scaleLinear","max","nice","defs","gradient","xAxis","call","axisBottom","tickSize","tickFormat","yAxisValues","yAxis","axisLeft","tickValues","text","charAt","toUpperCase","slice","bars","enter","bandwidth","on","event","transition","duration","style","tooltipContent","total","reduce","sum","item","count","percentage","toFixed","sources","join","topics","html","pageX","pageY","delay","i","handleMetricChange","newMetric","clientHeight","handleReset","renderRegionInfo","className","children","fileName","_jsxFileName","lineNumber","columnNumber","source","idx","topic","actionButtons","value","onChange","e","target","onClick","title","then","catch","styles","dangerouslySetInnerHTML","__html","message","icon","ref","_c","$RefreshReg$"],"sources":["C:/Users/Dell/OneDrive/Desktop/new/frontend/src/components/charts/RegionChart.js"],"sourcesContent":["import React, { useEffect, useRef, useState } from 'react';\r\nimport * as d3 from 'd3';\r\nimport api from '../../services/api';\r\nimport CardContainer from '../common/CardContainer';\r\nimport Loader from '../common/Loader';\r\nimport NoDataMessage from '../common/NoDataMessage';\r\nimport { createTooltip, formatNumber } from '../../utils/helpers';\r\n\r\nconst RegionChart = () => {\r\n  const [data, setData] = useState(null);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState(null);\r\n  const [metric, setMetric] = useState('count'); // 'count', 'intensity', 'likelihood', 'relevance'\r\n  const [filteredData, setFilteredData] = useState(null);\r\n  const [filter, setFilter] = useState(''); // Filter by region\r\n  const [regions, setRegions] = useState([]); // Available regions for filtering\r\n  const [selectedRegionInfo, setSelectedRegionInfo] = useState(null); // To display sources and topics\r\n  const svgRef = useRef(null);\r\n  const containerRef = useRef(null);\r\n  \r\n  // Fetch regions for filter dropdown\r\n  useEffect(() => {\r\n    const fetchFilters = async () => {\r\n      try {\r\n        const filtersData = await api.getFilters();\r\n        setRegions(filtersData.regions || []);\r\n      } catch (err) {\r\n        console.error('Error fetching filter options:', err);\r\n      }\r\n    };\r\n    \r\n    fetchFilters();\r\n  }, []);\r\n  \r\n  // Fetch region data based on filter\r\n  useEffect(() => {\r\n    const fetchRegionData = async () => {\r\n      try {\r\n        setLoading(true);\r\n        const filters = filter ? { region: filter } : {};\r\n        const regionData = await api.getRegions(filters);\r\n        setData(regionData);\r\n        \r\n        // Set filtered data\r\n        if (filter) {\r\n          // Find the selected region data to display sources and topics\r\n          const selectedRegion = regionData.find(r => r.region === filter);\r\n          if (selectedRegion) {\r\n            setSelectedRegionInfo(selectedRegion);\r\n          }\r\n          setFilteredData(regionData.filter(d => d.region === filter));\r\n        } else {\r\n          setFilteredData(regionData);\r\n          setSelectedRegionInfo(null);\r\n        }\r\n        \r\n        setLoading(false);\r\n      } catch (err) {\r\n        console.error('Error fetching region data:', err);\r\n        setError('Failed to load region data');\r\n        setLoading(false);\r\n      }\r\n    };\r\n    \r\n    fetchRegionData();\r\n  }, [filter]);\r\n  \r\n  useEffect(() => {\r\n    if (filteredData && filteredData.length > 0 && !loading) {\r\n      renderChart();\r\n    }\r\n  }, [filteredData, loading, metric]);\r\n  \r\n  useEffect(() => {\r\n    // Add resize listener\r\n    const handleResize = () => {\r\n      if (filteredData && filteredData.length > 0 && !loading) {\r\n        renderChart();\r\n      }\r\n    };\r\n    \r\n    window.addEventListener('resize', handleResize);\r\n    return () => window.removeEventListener('resize', handleResize);\r\n  }, [filteredData, loading, metric]);\r\n  \r\n  const renderChart = () => {\r\n    if (!svgRef.current || !containerRef.current) return;\r\n    \r\n    // Clear previous chart\r\n    d3.select(svgRef.current).selectAll('*').remove();\r\n    \r\n    // Set dimensions\r\n    const containerWidth = containerRef.current.clientWidth;\r\n    const margin = { top: 30, right: 20, bottom: 80, left: 60 };\r\n    const width = containerWidth - margin.left - margin.right;\r\n    const height = 400 - margin.top - margin.bottom;\r\n    \r\n    // Process and sort data\r\n    const processedData = [...filteredData]\r\n      .filter(d => d.region && d.region !== 'Unknown' && d[metric] > 0)\r\n      .sort((a, b) => b[metric] - a[metric]);\r\n    \r\n    // Create SVG\r\n    const svg = d3.select(svgRef.current)\r\n      .attr('width', width + margin.left + margin.right)\r\n      .attr('height', height + margin.top + margin.bottom)\r\n      .append('g')\r\n      .attr('transform', `translate(${margin.left},${margin.top})`);\r\n    \r\n    // Create tooltip\r\n    const tooltip = createTooltip(d3);\r\n    \r\n    // Create scales\r\n    const x = d3.scaleBand()\r\n      .domain(processedData.map(d => d.region))\r\n      .range([0, width])\r\n      .padding(0.3);\r\n    \r\n    const y = d3.scaleLinear()\r\n      .domain([0, d3.max(processedData, d => d[metric]) * 1.1])\r\n      .nice()\r\n      .range([height, 0]);\r\n    \r\n    // Create gradient for bars\r\n    const defs = svg.append('defs');\r\n    const gradient = defs.append('linearGradient')\r\n      .attr('id', 'region-bar-gradient')\r\n      .attr('gradientUnits', 'userSpaceOnUse')\r\n      .attr('x1', 0)\r\n      .attr('y1', height)\r\n      .attr('x2', 0)\r\n      .attr('y2', 0);\r\n    \r\n    gradient.append('stop')\r\n      .attr('offset', '0%')\r\n      .attr('stop-color', '#3182bd');\r\n    \r\n    gradient.append('stop')\r\n      .attr('offset', '100%')\r\n      .attr('stop-color', '#6baed6');\r\n    \r\n    // Add X axis without labels (they will show only on hover)\r\n    const xAxis = svg.append('g')\r\n      .attr('class', 'axis x-axis')\r\n      .attr('transform', `translate(0,${height})`)\r\n      .call(d3.axisBottom(x).tickSize(0).tickFormat(''));\r\n    \r\n    // Add only a single line for X axis\r\n    xAxis.select('.domain').attr('stroke', '#ccc');\r\n    \r\n    // Add Y axis with only min and max values\r\n    const yAxisValues = [0, d3.max(processedData, d => d[metric])];\r\n    const yAxis = svg.append('g')\r\n      .attr('class', 'axis y-axis')\r\n      .call(d3.axisLeft(y)\r\n        .tickValues(yAxisValues)\r\n        .tickFormat(d => formatNumber(d)));\r\n    \r\n    // Add Y axis label\r\n    svg.append('text')\r\n      .attr('class', 'axis-label')\r\n      .attr('transform', 'rotate(-90)')\r\n      .attr('y', -margin.left + 15)\r\n      .attr('x', -height / 2)\r\n      .attr('dy', '1em')\r\n      .attr('text-anchor', 'middle')\r\n      .text(metric === 'count' ? 'Number of Events' : metric.charAt(0).toUpperCase() + metric.slice(1));\r\n    \r\n    // Create horizontal bars with rounded corners\r\n    const bars = svg.selectAll('.bar')\r\n      .data(processedData)\r\n      .enter()\r\n      .append('rect')\r\n      .attr('class', 'bar')\r\n      .attr('x', d => x(d.region))\r\n      .attr('width', x.bandwidth())\r\n      .attr('y', height)\r\n      .attr('height', 0)\r\n      .attr('rx', 4)\r\n      .attr('ry', 4)\r\n      .attr('fill', 'url(#region-bar-gradient)')\r\n      .on('mouseover', function(event, d) {\r\n        // Highlight bar\r\n        d3.select(this)\r\n          .transition()\r\n          .duration(300)\r\n          .attr('opacity', 0.8)\r\n          .attr('stroke', '#2c3e50')\r\n          .attr('stroke-width', 2);\r\n        \r\n        // Show tooltip with region name, value, and sources/topics\r\n        tooltip.transition()\r\n          .duration(200)\r\n          .style('opacity', 0.9);\r\n        \r\n        let tooltipContent = `\r\n          <strong>${d.region}</strong><br/>\r\n          ${metric === 'count' ? 'Count' : metric.charAt(0).toUpperCase() + metric.slice(1)}: ${formatNumber(d[metric])}\r\n        `;\r\n        \r\n        // Add percentage if it's count metric\r\n        if (metric === 'count') {\r\n          const total = processedData.reduce((sum, item) => sum + item.count, 0);\r\n          const percentage = (d.count / total * 100).toFixed(1);\r\n          tooltipContent += `<br/>Percentage: ${percentage}%`;\r\n        }\r\n        \r\n        // Add sources and topics info if available\r\n        if (d.sources && d.sources.length > 0) {\r\n          tooltipContent += `<br/><br/><strong>Top Sources:</strong> ${d.sources.slice(0, 3).join(', ')}`;\r\n          if (d.sources.length > 3) {\r\n            tooltipContent += ` and ${d.sources.length - 3} more`;\r\n          }\r\n        }\r\n        \r\n        if (d.topics && d.topics.length > 0) {\r\n          tooltipContent += `<br/><strong>Top Topics:</strong> ${d.topics.slice(0, 3).join(', ')}`;\r\n          if (d.topics.length > 3) {\r\n            tooltipContent += ` and ${d.topics.length - 3} more`;\r\n          }\r\n        }\r\n        \r\n        tooltip.html(tooltipContent)\r\n          .style('left', (event.pageX + 10) + 'px')\r\n          .style('top', (event.pageY - 28) + 'px');\r\n        \r\n        // Show region name temporarily below the bar\r\n        svg.append('text')\r\n          .attr('class', 'temp-region-label')\r\n          .attr('x', x(d.region) + x.bandwidth() / 2)\r\n          .attr('y', height + 20)\r\n          .attr('text-anchor', 'middle')\r\n          .attr('font-size', '12px')\r\n          .text(d.region);\r\n      })\r\n      .on('mouseout', function() {\r\n        // Restore bar appearance\r\n        d3.select(this)\r\n          .transition()\r\n          .duration(300)\r\n          .attr('opacity', 1)\r\n          .attr('stroke', 'none');\r\n        \r\n        // Hide tooltip\r\n        tooltip.transition()\r\n          .duration(500)\r\n          .style('opacity', 0);\r\n        \r\n        // Remove temporary region label\r\n        svg.selectAll('.temp-region-label').remove();\r\n      })\r\n      .on('click', function(event, d) {\r\n        // Show region name temporarily below the bar (persists until another bar is clicked)\r\n        svg.selectAll('.clicked-region-label').remove();\r\n        \r\n        svg.append('text')\r\n          .attr('class', 'clicked-region-label')\r\n          .attr('x', x(d.region) + x.bandwidth() / 2)\r\n          .attr('y', height + 20)\r\n          .attr('text-anchor', 'middle')\r\n          .attr('font-size', '12px')\r\n          .attr('font-weight', 'bold')\r\n          .text(d.region);\r\n        \r\n        // Set selected region to display info\r\n        setSelectedRegionInfo(d);\r\n      });\r\n    \r\n    // Animate bars on load\r\n    bars.transition()\r\n      .duration(800)\r\n      .delay((d, i) => i * 50)\r\n      .attr('y', d => y(d[metric]))\r\n      .attr('height', d => height - y(d[metric]));\r\n    \r\n    // Add value labels on top of bars\r\n    svg.selectAll('.bar-label')\r\n      .data(processedData)\r\n      .enter()\r\n      .append('text')\r\n      .attr('class', 'bar-label')\r\n      .attr('x', d => x(d.region) + x.bandwidth() / 2)\r\n      .attr('y', d => y(d[metric]) - 5)\r\n      .attr('text-anchor', 'middle')\r\n      .attr('font-size', '11px')\r\n      .attr('opacity', 0)\r\n      .text(d => formatNumber(d[metric]))\r\n      .transition()\r\n      .duration(800)\r\n      .delay((d, i) => 800 + i * 50)\r\n      .attr('opacity', 1);\r\n    \r\n    // Display region names below chart when filtered\r\n    if (filter) {\r\n      svg.selectAll('.region-label')\r\n        .data(processedData)\r\n        .enter()\r\n        .append('text')\r\n        .attr('class', 'region-label')\r\n        .attr('x', d => x(d.region) + x.bandwidth() / 2)\r\n        .attr('y', height + 20)\r\n        .attr('text-anchor', 'middle')\r\n        .attr('font-size', '12px')\r\n        .attr('font-weight', 'bold')\r\n        .text(d => d.region);\r\n    }\r\n  };\r\n  \r\n  const handleMetricChange = (newMetric) => {\r\n    // Animate transition between metrics\r\n    d3.selectAll('.bar')\r\n      .transition()\r\n      .duration(500)\r\n      .attr('y', svgRef.current.clientHeight)\r\n      .attr('height', 0)\r\n      .on('end', () => {\r\n        setMetric(newMetric);\r\n      });\r\n  };\r\n  \r\n  // Reset filter\r\n  const handleReset = () => {\r\n    setFilter('');\r\n    setSelectedRegionInfo(null);\r\n  };\r\n  \r\n  // Render source and topic info when a region is selected\r\n  const renderRegionInfo = () => {\r\n    if (!selectedRegionInfo) return null;\r\n    \r\n    return (\r\n      <div className=\"region-details\">\r\n        <h4>Information for {selectedRegionInfo.region}</h4>\r\n        \r\n        {selectedRegionInfo.sources && selectedRegionInfo.sources.length > 0 && (\r\n          <div className=\"info-section\">\r\n            <h5>Sources:</h5>\r\n            <div className=\"tag-container\">\r\n              {selectedRegionInfo.sources.map((source, idx) => (\r\n                <span key={`source-${idx}`} className=\"info-tag source-tag\">{source}</span>\r\n              ))}\r\n            </div>\r\n          </div>\r\n        )}\r\n        \r\n        {selectedRegionInfo.topics && selectedRegionInfo.topics.length > 0 && (\r\n          <div className=\"info-section\">\r\n            <h5>Topics:</h5>\r\n            <div className=\"tag-container\">\r\n              {selectedRegionInfo.topics.map((topic, idx) => (\r\n                <span key={`topic-${idx}`} className=\"info-tag topic-tag\">{topic}</span>\r\n              ))}\r\n            </div>\r\n          </div>\r\n        )}\r\n      </div>\r\n    );\r\n  };\r\n  \r\n  const actionButtons = (\r\n    <div className=\"chart-actions\">\r\n      <div className=\"filter-controls\">\r\n        <select \r\n          className=\"region-filter\" \r\n          value={filter} \r\n          onChange={(e) => setFilter(e.target.value)}\r\n        >\r\n          <option value=\"\">All Regions</option>\r\n          {regions.map((region, idx) => (\r\n            <option key={idx} value={region}>{region}</option>\r\n          ))}\r\n        </select>\r\n        {filter && (\r\n          <button className=\"reset-filter-btn\" onClick={handleReset}>\r\n            Reset\r\n          </button>\r\n        )}\r\n      </div>\r\n      \r\n      <button \r\n        className={`chart-action-btn ${metric === 'count' ? 'active' : ''}`} \r\n        onClick={() => handleMetricChange('count')}\r\n        title=\"Event Count\"\r\n      >\r\n        Count\r\n      </button>\r\n      <button \r\n        className={`chart-action-btn ${metric === 'intensity' ? 'active' : ''}`} \r\n        onClick={() => handleMetricChange('intensity')}\r\n        title=\"Intensity\"\r\n      >\r\n        Intensity\r\n      </button>\r\n      <button \r\n        className={`chart-action-btn ${metric === 'likelihood' ? 'active' : ''}`} \r\n        onClick={() => handleMetricChange('likelihood')}\r\n        title=\"Likelihood\"\r\n      >\r\n        Likelihood\r\n      </button>\r\n      <button \r\n        className={`chart-action-btn ${metric === 'relevance' ? 'active' : ''}`} \r\n        onClick={() => handleMetricChange('relevance')}\r\n        title=\"Relevance\"\r\n      >\r\n        Relevance\r\n      </button>\r\n      <button \r\n        className=\"refresh-btn\" \r\n        onClick={() => {\r\n          setLoading(true);\r\n          const filters = filter ? { region: filter } : {};\r\n          api.getRegions(filters).then(data => {\r\n            setData(data);\r\n            setFilteredData(filter ? data.filter(d => d.region === filter) : data);\r\n            setLoading(false);\r\n          }).catch(err => {\r\n            setError('Failed to reload data');\r\n            setLoading(false);\r\n          });\r\n        }}\r\n      >\r\n        <span className=\"refresh-icon\">↻</span>\r\n      </button>\r\n    </div>\r\n  );\r\n  \r\n  // Add some CSS for the new components\r\n  const styles = `\r\n    <style>\r\n      .filter-controls {\r\n        display: flex;\r\n        align-items: center;\r\n        margin-right: 15px;\r\n      }\r\n      \r\n      .region-filter {\r\n        padding: 6px 10px;\r\n        border-radius: 4px;\r\n        border: 1px solid #ccc;\r\n        margin-right: 10px;\r\n      }\r\n      \r\n      .reset-filter-btn {\r\n        background-color: #f1f1f1;\r\n        border: 1px solid #ddd;\r\n        border-radius: 4px;\r\n        padding: 6px 10px;\r\n        cursor: pointer;\r\n      }\r\n      \r\n      .reset-filter-btn:hover {\r\n        background-color: #e0e0e0;\r\n      }\r\n      \r\n      .region-details {\r\n        margin-top: 20px;\r\n        padding: 15px;\r\n        background-color: #f9f9f9;\r\n        border-radius: 8px;\r\n        border: 1px solid #e0e0e0;\r\n      }\r\n      \r\n      .info-section {\r\n        margin-bottom: 15px;\r\n      }\r\n      \r\n      .info-section h5 {\r\n        margin-bottom: 8px;\r\n        color: #333;\r\n      }\r\n      \r\n      .tag-container {\r\n        display: flex;\r\n        flex-wrap: wrap;\r\n        gap: 8px;\r\n      }\r\n      \r\n      .info-tag {\r\n        display: inline-block;\r\n        padding: 4px 10px;\r\n        border-radius: 16px;\r\n        font-size: 12px;\r\n        color: white;\r\n      }\r\n      \r\n      .source-tag {\r\n        background-color: #3498db;\r\n      }\r\n      \r\n      .topic-tag {\r\n        background-color: #2ecc71;\r\n      }\r\n    </style>\r\n  `;\r\n  \r\n  return (\r\n    <>\r\n      <div dangerouslySetInnerHTML={{ __html: styles }} />\r\n      <CardContainer title={`Region Distribution ${filter ? `- ${filter}` : ''}`} actionButtons={actionButtons}>\r\n        {loading ? (\r\n          <Loader message=\"Loading region data...\" />\r\n        ) : error ? (\r\n          <NoDataMessage message={error} icon=\"⚠️\" />\r\n        ) : !filteredData || filteredData.length === 0 ? (\r\n          <NoDataMessage message={filter ? `No data available for region: ${filter}` : \"No region data available\"} />\r\n        ) : (\r\n          <>\r\n            <div className=\"chart-container\" ref={containerRef}>\r\n              <svg ref={svgRef} className=\"region-chart\"></svg>\r\n            </div>\r\n            {selectedRegionInfo && renderRegionInfo()}\r\n          </>\r\n        )}\r\n      </CardContainer>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default RegionChart;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}