{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Dell\\\\OneDrive\\\\Desktop\\\\new\\\\frontend\\\\src\\\\components\\\\charts\\\\TopicDistributionChart.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useRef } from 'react';\nimport * as d3 from 'd3';\nimport api from '../../services/api';\nimport CardContainer from '../common/CardContainer';\nimport Loader from '../common/Loader';\nimport NoDataMessage from '../common/NoDataMessage';\nimport { formatNumber, truncateText, createTooltip, debounce } from '../../utils/helpers';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst TopicDistributionChart = ({\n  filters,\n  onFilterChange\n}) => {\n  _s();\n  const [data, setData] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  const [selectedMetric, setSelectedMetric] = useState('intensity'); // 'intensity' or 'relevance'\n  const [topics, setTopics] = useState([]);\n  const [selectedTopic, setSelectedTopic] = useState('all');\n  const svgRef = useRef(null);\n  const containerRef = useRef(null);\n  const tooltipRef = useRef(null);\n\n  // Fetch available topics for the filter dropdown\n  useEffect(() => {\n    const fetchTopics = async () => {\n      try {\n        const filtersData = await api.getFilters();\n        setTopics(filtersData.topics || []);\n      } catch (err) {\n        console.error('Error fetching topics for filter:', err);\n      }\n    };\n    fetchTopics();\n  }, []);\n\n  // Fetch data with filters applied\n  useEffect(() => {\n    const fetchData = async () => {\n      try {\n        setLoading(true);\n\n        // Apply filters including the selected topic\n        const appliedFilters = {\n          ...filters\n        };\n\n        // Only add topic filter if it's not 'all'\n        if (selectedTopic !== 'all') {\n          appliedFilters.topic = selectedTopic;\n        }\n        const topicsData = await api.getTopics(appliedFilters);\n\n        // Sort by count and take top 20\n        const sortedData = topicsData.sort((a, b) => b.count - a.count).slice(0, 20);\n        setData(sortedData);\n        setLoading(false);\n      } catch (err) {\n        console.error('Error fetching topics data:', err);\n        setError('Failed to load topics data');\n        setLoading(false);\n      }\n    };\n    fetchData();\n  }, [filters, selectedTopic]);\n  useEffect(() => {\n    if (data.length > 0 && !loading) {\n      drawTreeMap();\n\n      // Add resize listener\n      const handleResize = debounce(() => {\n        drawTreeMap();\n      }, 300);\n      window.addEventListener('resize', handleResize);\n      return () => window.removeEventListener('resize', handleResize);\n    }\n  }, [data, loading, selectedMetric]);\n  const handleTopicChange = event => {\n    const topic = event.target.value;\n    setSelectedTopic(topic);\n\n    // If onFilterChange prop exists, call it to update parent component filters\n    if (onFilterChange) {\n      onFilterChange({\n        ...filters,\n        topic: topic !== 'all' ? topic : undefined\n      });\n    }\n  };\n  const drawTreeMap = () => {\n    if (!svgRef.current || !containerRef.current) return;\n\n    // Filter data to show only the selected topic if one is selected\n    let filteredData = data;\n    if (selectedTopic !== 'all') {\n      filteredData = data.filter(item => item.topic.toLowerCase() === selectedTopic.toLowerCase());\n\n      // If no exact match is found, show an error\n      if (filteredData.length === 0) {\n        setError(`No exact match found for topic: ${selectedTopic}`);\n        return;\n      }\n    }\n\n    // Clear previous chart\n    d3.select(svgRef.current).selectAll('*').remove();\n\n    // Set dimensions\n    const containerWidth = containerRef.current.clientWidth;\n    const containerHeight = containerRef.current.clientHeight || 400;\n\n    // Create SVG\n    const svg = d3.select(svgRef.current).attr('width', containerWidth).attr('height', containerHeight);\n\n    // Create tooltip if not already created\n    if (!tooltipRef.current) {\n      tooltipRef.current = createTooltip(d3);\n    }\n\n    // Prepare data hierarchy\n    const hierarchyData = {\n      name: \"Topics\",\n      children: filteredData.map(d => ({\n        name: d.topic,\n        value: selectedMetric === 'intensity' ? d.intensity : d.relevance,\n        count: d.count,\n        intensity: d.intensity,\n        relevance: d.relevance,\n        likelihood: d.likelihood\n      }))\n    };\n\n    // Create a color scale\n    const colorScale = d3.scaleLinear().domain([0, d3.max(data, d => selectedMetric === 'intensity' ? d.intensity : d.relevance) || 1]).range(['#e0f2ff', '#0056b3']);\n\n    // Create treemap layout\n    const treemap = d3.treemap().size([containerWidth, containerHeight]).padding(4).round(true);\n\n    // Create hierarchy\n    const root = d3.hierarchy(hierarchyData).sum(d => d.value).sort((a, b) => b.value - a.value);\n\n    // Generate the treemap layout\n    treemap(root);\n\n    // Create the treemap cells with transition\n    const cells = svg.selectAll('.cell').data(root.leaves(), d => d.data.name);\n\n    // Remove exiting cells\n    cells.exit().transition().duration(500).attr('transform', d => `translate(${d.x0},${d.y0})`).attr('width', 0).attr('height', 0).remove();\n\n    // Add new cells\n    const enterCells = cells.enter().append('g').attr('class', 'cell').attr('transform', d => `translate(${d.x0},${d.y0})`).style('opacity', 0);\n\n    // Animated rectangle creation\n    enterCells.append('rect').attr('width', 0).attr('height', 0).attr('id', d => `rect-${d.data.name.replace(/\\s+/g, '-').toLowerCase()}`).attr('rx', 4).attr('ry', 4).transition().duration(800).delay((d, i) => i * 30).attr('width', d => d.x1 - d.x0).attr('height', d => d.y1 - d.y0).attr('fill', d => colorScale(d.data.value)).style('opacity', 1);\n    enterCells.transition().duration(800).delay((d, i) => i * 30).style('opacity', 1);\n\n    // Update existing cells\n    cells.transition().duration(800).attr('transform', d => `translate(${d.x0},${d.y0})`).select('rect').attr('width', d => d.x1 - d.x0).attr('height', d => d.y1 - d.y0).attr('fill', d => colorScale(d.data.value));\n\n    // Cell text\n    const allCells = svg.selectAll('.cell');\n\n    // Remove old text\n    allCells.selectAll('text').remove();\n\n    // Add new text\n    allCells.append('text').attr('class', 'topic-label').attr('x', 5).attr('y', 15).attr('fill', d => d.data.value > d3.max(data, item => selectedMetric === 'intensity' ? item.intensity : item.relevance) / 2 ? 'white' : 'black').style('font-size', '12px').style('font-weight', 'bold').style('opacity', 0).text(d => truncateText(d.data.name, Math.floor((d.x1 - d.x0) / 6))).transition().duration(800).delay((d, i) => 300 + i * 30).style('opacity', 1);\n\n    // Value text\n    allCells.append('text').attr('class', 'value-label').attr('x', 5).attr('y', 30).attr('fill', d => d.data.value > d3.max(data, item => selectedMetric === 'intensity' ? item.intensity : item.relevance) / 2 ? 'white' : 'black').style('font-size', '10px').style('opacity', 0).text(d => `${selectedMetric === 'intensity' ? 'Int' : 'Rel'}: ${formatNumber(d.data.value)}`).transition().duration(800).delay((d, i) => 400 + i * 30).style('opacity', d => d.x1 - d.x0 > 60 && d.y1 - d.y0 > 40 ? 1 : 0);\n\n    // Count text\n    allCells.append('text').attr('class', 'count-label').attr('x', 5).attr('y', 45).attr('fill', d => d.data.value > d3.max(data, item => selectedMetric === 'intensity' ? item.intensity : item.relevance) / 2 ? 'white' : 'black').style('font-size', '10px').style('opacity', 0).text(d => `Count: ${formatNumber(d.data.count)}`).transition().duration(800).delay((d, i) => 500 + i * 30).style('opacity', d => d.x1 - d.x0 > 80 && d.y1 - d.y0 > 60 ? 1 : 0);\n\n    // Add hover effects\n    allCells.on('mouseover', function (event, d) {\n      d3.select(this).select('rect').transition().duration(300).attr('stroke', '#000').attr('stroke-width', 2).style('filter', 'drop-shadow(0px 0px 6px rgba(0, 0, 0, 0.3))');\n      tooltipRef.current.style('opacity', 1).html(`\n            <strong>Topic:</strong> ${d.data.name}<br>\n            <strong>Count:</strong> ${formatNumber(d.data.count)}<br>\n            <strong>Intensity:</strong> ${formatNumber(d.data.intensity)}<br>\n            <strong>Relevance:</strong> ${formatNumber(d.data.relevance)}<br>\n            <strong>Likelihood:</strong> ${formatNumber(d.data.likelihood)}\n          `).style('left', event.pageX + 10 + 'px').style('top', event.pageY - 20 + 'px');\n    }).on('mouseout', function () {\n      d3.select(this).select('rect').transition().duration(300).attr('stroke', 'none').attr('stroke-width', 0).style('filter', 'none');\n      tooltipRef.current.style('opacity', 0);\n    });\n\n    // Add a pulsing effect to highlight top topics\n    const topCells = allCells.filter((d, i) => i < 5);\n    function pulseEffect() {\n      topCells.select('rect').transition().duration(1000).style('opacity', 0.7).transition().duration(1000).style('opacity', 1).on('end', function (d, i) {\n        if (i === 0) pulseEffect();\n      });\n    }\n    pulseEffect();\n\n    // Add a legend\n    const legendHeight = 20;\n    const legendWidth = 200;\n    const legend = svg.append('g').attr('class', 'legend').attr('transform', `translate(${containerWidth - legendWidth - 20}, 20)`);\n\n    // Create gradient for legend\n    const defs = svg.append('defs');\n    const linearGradient = defs.append('linearGradient').attr('id', 'topic-color-gradient').attr('x1', '0%').attr('y1', '0%').attr('x2', '100%').attr('y2', '0%');\n    linearGradient.append('stop').attr('offset', '0%').attr('stop-color', '#e0f2ff');\n    linearGradient.append('stop').attr('offset', '100%').attr('stop-color', '#0056b3');\n\n    // Draw legend rectangle\n    legend.append('rect').attr('width', legendWidth).attr('height', legendHeight).style('fill', 'url(#topic-color-gradient)');\n\n    // Add legend labels\n    legend.append('text').attr('x', 0).attr('y', legendHeight + 15).style('font-size', '10px').text('Lower');\n    legend.append('text').attr('x', legendWidth).attr('y', legendHeight + 15).style('font-size', '10px').style('text-anchor', 'end').text('Higher');\n    legend.append('text').attr('x', legendWidth / 2).attr('y', legendHeight + 15).style('font-size', '10px').style('text-anchor', 'middle').text(selectedMetric === 'intensity' ? 'Intensity' : 'Relevance');\n  };\n  const handleMetricChange = metric => {\n    setSelectedMetric(metric);\n  };\n  const renderActionButtons = () => /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"chart-actions\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"filter-container\",\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        htmlFor: \"topic-filter\",\n        children: \"Topic: \"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 370,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n        id: \"topic-filter\",\n        value: selectedTopic,\n        onChange: handleTopicChange,\n        className: \"filter-select\",\n        children: [/*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"all\",\n          children: \"All Topics\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 377,\n          columnNumber: 11\n        }, this), topics.map(topic => /*#__PURE__*/_jsxDEV(\"option\", {\n          value: topic,\n          children: topic\n        }, topic, false, {\n          fileName: _jsxFileName,\n          lineNumber: 379,\n          columnNumber: 13\n        }, this))]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 371,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 369,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"metric-buttons\",\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        className: `chart-btn ${selectedMetric === 'intensity' ? 'active' : ''}`,\n        onClick: () => handleMetricChange('intensity'),\n        children: \"Intensity\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 384,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: `chart-btn ${selectedMetric === 'relevance' ? 'active' : ''}`,\n        onClick: () => handleMetricChange('relevance'),\n        children: \"Relevance\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 390,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 383,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 368,\n    columnNumber: 5\n  }, this);\n  return /*#__PURE__*/_jsxDEV(CardContainer, {\n    title: \"Topic Distribution TreeMap\",\n    actionButtons: renderActionButtons(),\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      ref: containerRef,\n      style: {\n        width: '100%',\n        height: '400px'\n      },\n      children: loading ? /*#__PURE__*/_jsxDEV(Loader, {\n        message: \"Loading topic data...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 407,\n        columnNumber: 11\n      }, this) : error ? /*#__PURE__*/_jsxDEV(NoDataMessage, {\n        message: error,\n        icon: \"\\u26A0\\uFE0F\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 409,\n        columnNumber: 11\n      }, this) : data.length === 0 ? /*#__PURE__*/_jsxDEV(NoDataMessage, {\n        message: \"No topic data available\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 411,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(\"svg\", {\n        ref: svgRef,\n        className: \"chart-svg\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 413,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 405,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 401,\n    columnNumber: 5\n  }, this);\n};\n_s(TopicDistributionChart, \"fVKwJdGWVj0ORXvsRQ3QV1eFhh4=\");\n_c = TopicDistributionChart;\nexport default TopicDistributionChart;\nvar _c;\n$RefreshReg$(_c, \"TopicDistributionChart\");","map":{"version":3,"names":["React","useState","useEffect","useRef","d3","api","CardContainer","Loader","NoDataMessage","formatNumber","truncateText","createTooltip","debounce","jsxDEV","_jsxDEV","TopicDistributionChart","filters","onFilterChange","_s","data","setData","loading","setLoading","error","setError","selectedMetric","setSelectedMetric","topics","setTopics","selectedTopic","setSelectedTopic","svgRef","containerRef","tooltipRef","fetchTopics","filtersData","getFilters","err","console","fetchData","appliedFilters","topic","topicsData","getTopics","sortedData","sort","a","b","count","slice","length","drawTreeMap","handleResize","window","addEventListener","removeEventListener","handleTopicChange","event","target","value","undefined","current","filteredData","filter","item","toLowerCase","select","selectAll","remove","containerWidth","clientWidth","containerHeight","clientHeight","svg","attr","hierarchyData","name","children","map","d","intensity","relevance","likelihood","colorScale","scaleLinear","domain","max","range","treemap","size","padding","round","root","hierarchy","sum","cells","leaves","exit","transition","duration","x0","y0","enterCells","enter","append","style","replace","delay","i","x1","y1","allCells","text","Math","floor","on","html","pageX","pageY","topCells","pulseEffect","legendHeight","legendWidth","legend","defs","linearGradient","handleMetricChange","metric","renderActionButtons","className","htmlFor","fileName","_jsxFileName","lineNumber","columnNumber","id","onChange","onClick","title","actionButtons","ref","width","height","message","icon","_c","$RefreshReg$"],"sources":["C:/Users/Dell/OneDrive/Desktop/new/frontend/src/components/charts/TopicDistributionChart.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\r\nimport * as d3 from 'd3';\r\nimport api from '../../services/api';\r\nimport CardContainer from '../common/CardContainer';\r\nimport Loader from '../common/Loader';\r\nimport NoDataMessage from '../common/NoDataMessage';\r\nimport { formatNumber, truncateText, createTooltip, debounce } from '../../utils/helpers';\r\n\r\nconst TopicDistributionChart = ({ filters, onFilterChange }) => {\r\n  const [data, setData] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState(null);\r\n  const [selectedMetric, setSelectedMetric] = useState('intensity'); // 'intensity' or 'relevance'\r\n  const [topics, setTopics] = useState([]);\r\n  const [selectedTopic, setSelectedTopic] = useState('all');\r\n  const svgRef = useRef(null);\r\n  const containerRef = useRef(null);\r\n  const tooltipRef = useRef(null);\r\n\r\n  // Fetch available topics for the filter dropdown\r\n  useEffect(() => {\r\n    const fetchTopics = async () => {\r\n      try {\r\n        const filtersData = await api.getFilters();\r\n        setTopics(filtersData.topics || []);\r\n      } catch (err) {\r\n        console.error('Error fetching topics for filter:', err);\r\n      }\r\n    };\r\n\r\n    fetchTopics();\r\n  }, []);\r\n\r\n  // Fetch data with filters applied\r\nuseEffect(() => {\r\n  const fetchData = async () => {\r\n    try {\r\n      setLoading(true);\r\n      \r\n      // Apply filters including the selected topic\r\n      const appliedFilters = {\r\n        ...filters\r\n      };\r\n      \r\n      // Only add topic filter if it's not 'all'\r\n      if (selectedTopic !== 'all') {\r\n        appliedFilters.topic = selectedTopic;\r\n      }\r\n      \r\n      const topicsData = await api.getTopics(appliedFilters);\r\n      \r\n      // Sort by count and take top 20\r\n      const sortedData = topicsData\r\n        .sort((a, b) => b.count - a.count)\r\n        .slice(0, 20);\r\n      \r\n      setData(sortedData);\r\n      setLoading(false);\r\n    } catch (err) {\r\n      console.error('Error fetching topics data:', err);\r\n      setError('Failed to load topics data');\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  fetchData();\r\n}, [filters, selectedTopic]);\r\n\r\n  useEffect(() => {\r\n    if (data.length > 0 && !loading) {\r\n      drawTreeMap();\r\n      \r\n      // Add resize listener\r\n      const handleResize = debounce(() => {\r\n        drawTreeMap();\r\n      }, 300);\r\n      \r\n      window.addEventListener('resize', handleResize);\r\n      return () => window.removeEventListener('resize', handleResize);\r\n    }\r\n  }, [data, loading, selectedMetric]);\r\n\r\n  const handleTopicChange = (event) => {\r\n    const topic = event.target.value;\r\n    setSelectedTopic(topic);\r\n    \r\n    // If onFilterChange prop exists, call it to update parent component filters\r\n    if (onFilterChange) {\r\n      onFilterChange({\r\n        ...filters,\r\n        topic: topic !== 'all' ? topic : undefined\r\n      });\r\n    }\r\n  };\r\n\r\n  const drawTreeMap = () => {\r\n    if (!svgRef.current || !containerRef.current) return;\r\n\r\n    // Filter data to show only the selected topic if one is selected\r\n  let filteredData = data;\r\n  if (selectedTopic !== 'all') {\r\n    filteredData = data.filter(item => \r\n      item.topic.toLowerCase() === selectedTopic.toLowerCase()\r\n    );\r\n    \r\n    // If no exact match is found, show an error\r\n    if (filteredData.length === 0) {\r\n      setError(`No exact match found for topic: ${selectedTopic}`);\r\n      return;\r\n    }\r\n  }\r\n    \r\n    // Clear previous chart\r\n    d3.select(svgRef.current).selectAll('*').remove();\r\n\r\n    // Set dimensions\r\n    const containerWidth = containerRef.current.clientWidth;\r\n    const containerHeight = containerRef.current.clientHeight || 400;\r\n    \r\n    // Create SVG\r\n    const svg = d3.select(svgRef.current)\r\n      .attr('width', containerWidth)\r\n      .attr('height', containerHeight);\r\n\r\n    // Create tooltip if not already created\r\n    if (!tooltipRef.current) {\r\n      tooltipRef.current = createTooltip(d3);\r\n    }\r\n\r\n    // Prepare data hierarchy\r\n    const hierarchyData = {\r\n      name: \"Topics\",\r\n      children: filteredData.map(d => ({\r\n        name: d.topic,\r\n        value: selectedMetric === 'intensity' ? d.intensity : d.relevance,\r\n        count: d.count,\r\n        intensity: d.intensity,\r\n        relevance: d.relevance,\r\n        likelihood: d.likelihood\r\n      }))\r\n    };\r\n\r\n    // Create a color scale\r\n    const colorScale = d3.scaleLinear()\r\n      .domain([0, d3.max(data, d => selectedMetric === 'intensity' ? d.intensity : d.relevance) || 1])\r\n      .range(['#e0f2ff', '#0056b3']);\r\n\r\n    // Create treemap layout\r\n    const treemap = d3.treemap()\r\n      .size([containerWidth, containerHeight])\r\n      .padding(4)\r\n      .round(true);\r\n\r\n    // Create hierarchy\r\n    const root = d3.hierarchy(hierarchyData)\r\n      .sum(d => d.value)\r\n      .sort((a, b) => b.value - a.value);\r\n\r\n    // Generate the treemap layout\r\n    treemap(root);\r\n\r\n    // Create the treemap cells with transition\r\n    const cells = svg.selectAll('.cell')\r\n      .data(root.leaves(), d => d.data.name);\r\n    \r\n    // Remove exiting cells\r\n    cells.exit().transition().duration(500)\r\n      .attr('transform', d => `translate(${d.x0},${d.y0})`)\r\n      .attr('width', 0)\r\n      .attr('height', 0)\r\n      .remove();\r\n    \r\n    // Add new cells\r\n    const enterCells = cells.enter()\r\n      .append('g')\r\n      .attr('class', 'cell')\r\n      .attr('transform', d => `translate(${d.x0},${d.y0})`)\r\n      .style('opacity', 0);\r\n    \r\n    // Animated rectangle creation\r\n    enterCells.append('rect')\r\n      .attr('width', 0)\r\n      .attr('height', 0)\r\n      .attr('id', d => `rect-${d.data.name.replace(/\\s+/g, '-').toLowerCase()}`)\r\n      .attr('rx', 4)\r\n      .attr('ry', 4)\r\n      .transition()\r\n      .duration(800)\r\n      .delay((d, i) => i * 30)\r\n      .attr('width', d => d.x1 - d.x0)\r\n      .attr('height', d => d.y1 - d.y0)\r\n      .attr('fill', d => colorScale(d.data.value))\r\n      .style('opacity', 1);\r\n    \r\n    enterCells\r\n      .transition()\r\n      .duration(800)\r\n      .delay((d, i) => i * 30)\r\n      .style('opacity', 1);\r\n    \r\n    // Update existing cells\r\n    cells.transition()\r\n      .duration(800)\r\n      .attr('transform', d => `translate(${d.x0},${d.y0})`)\r\n      .select('rect')\r\n      .attr('width', d => d.x1 - d.x0)\r\n      .attr('height', d => d.y1 - d.y0)\r\n      .attr('fill', d => colorScale(d.data.value));\r\n    \r\n    // Cell text\r\n    const allCells = svg.selectAll('.cell');\r\n    \r\n    // Remove old text\r\n    allCells.selectAll('text').remove();\r\n    \r\n    // Add new text\r\n    allCells.append('text')\r\n      .attr('class', 'topic-label')\r\n      .attr('x', 5)\r\n      .attr('y', 15)\r\n      .attr('fill', d => d.data.value > d3.max(data, item => selectedMetric === 'intensity' ? item.intensity : item.relevance) / 2 ? 'white' : 'black')\r\n      .style('font-size', '12px')\r\n      .style('font-weight', 'bold')\r\n      .style('opacity', 0)\r\n      .text(d => truncateText(d.data.name, Math.floor((d.x1 - d.x0) / 6)))\r\n      .transition()\r\n      .duration(800)\r\n      .delay((d, i) => 300 + i * 30)\r\n      .style('opacity', 1);\r\n    \r\n    // Value text\r\n    allCells.append('text')\r\n      .attr('class', 'value-label')\r\n      .attr('x', 5)\r\n      .attr('y', 30)\r\n      .attr('fill', d => d.data.value > d3.max(data, item => selectedMetric === 'intensity' ? item.intensity : item.relevance) / 2 ? 'white' : 'black')\r\n      .style('font-size', '10px')\r\n      .style('opacity', 0)\r\n      .text(d => `${selectedMetric === 'intensity' ? 'Int' : 'Rel'}: ${formatNumber(d.data.value)}`)\r\n      .transition()\r\n      .duration(800)\r\n      .delay((d, i) => 400 + i * 30)\r\n      .style('opacity', d => (d.x1 - d.x0 > 60 && d.y1 - d.y0 > 40) ? 1 : 0);\r\n    \r\n    // Count text\r\n    allCells.append('text')\r\n      .attr('class', 'count-label')\r\n      .attr('x', 5)\r\n      .attr('y', 45)\r\n      .attr('fill', d => d.data.value > d3.max(data, item => selectedMetric === 'intensity' ? item.intensity : item.relevance) / 2 ? 'white' : 'black')\r\n      .style('font-size', '10px')\r\n      .style('opacity', 0)\r\n      .text(d => `Count: ${formatNumber(d.data.count)}`)\r\n      .transition()\r\n      .duration(800)\r\n      .delay((d, i) => 500 + i * 30)\r\n      .style('opacity', d => (d.x1 - d.x0 > 80 && d.y1 - d.y0 > 60) ? 1 : 0);\r\n    \r\n    // Add hover effects\r\n    allCells\r\n      .on('mouseover', function(event, d) {\r\n        d3.select(this).select('rect')\r\n          .transition()\r\n          .duration(300)\r\n          .attr('stroke', '#000')\r\n          .attr('stroke-width', 2)\r\n          .style('filter', 'drop-shadow(0px 0px 6px rgba(0, 0, 0, 0.3))');\r\n        \r\n        tooltipRef.current\r\n          .style('opacity', 1)\r\n          .html(`\r\n            <strong>Topic:</strong> ${d.data.name}<br>\r\n            <strong>Count:</strong> ${formatNumber(d.data.count)}<br>\r\n            <strong>Intensity:</strong> ${formatNumber(d.data.intensity)}<br>\r\n            <strong>Relevance:</strong> ${formatNumber(d.data.relevance)}<br>\r\n            <strong>Likelihood:</strong> ${formatNumber(d.data.likelihood)}\r\n          `)\r\n          .style('left', (event.pageX + 10) + 'px')\r\n          .style('top', (event.pageY - 20) + 'px');\r\n      })\r\n      .on('mouseout', function() {\r\n        d3.select(this).select('rect')\r\n          .transition()\r\n          .duration(300)\r\n          .attr('stroke', 'none')\r\n          .attr('stroke-width', 0)\r\n          .style('filter', 'none');\r\n        \r\n        tooltipRef.current.style('opacity', 0);\r\n      });\r\n    \r\n    // Add a pulsing effect to highlight top topics\r\n    const topCells = allCells.filter((d, i) => i < 5);\r\n    \r\n    function pulseEffect() {\r\n      topCells.select('rect')\r\n        .transition()\r\n        .duration(1000)\r\n        .style('opacity', 0.7)\r\n        .transition()\r\n        .duration(1000)\r\n        .style('opacity', 1)\r\n        .on('end', function(d, i) {\r\n          if (i === 0) pulseEffect();\r\n        });\r\n    }\r\n    \r\n    pulseEffect();\r\n    \r\n    // Add a legend\r\n    const legendHeight = 20;\r\n    const legendWidth = 200;\r\n    \r\n    const legend = svg.append('g')\r\n      .attr('class', 'legend')\r\n      .attr('transform', `translate(${containerWidth - legendWidth - 20}, 20)`);\r\n    \r\n    // Create gradient for legend\r\n    const defs = svg.append('defs');\r\n    const linearGradient = defs.append('linearGradient')\r\n      .attr('id', 'topic-color-gradient')\r\n      .attr('x1', '0%')\r\n      .attr('y1', '0%')\r\n      .attr('x2', '100%')\r\n      .attr('y2', '0%');\r\n    \r\n    linearGradient.append('stop')\r\n      .attr('offset', '0%')\r\n      .attr('stop-color', '#e0f2ff');\r\n    \r\n    linearGradient.append('stop')\r\n      .attr('offset', '100%')\r\n      .attr('stop-color', '#0056b3');\r\n    \r\n    // Draw legend rectangle\r\n    legend.append('rect')\r\n      .attr('width', legendWidth)\r\n      .attr('height', legendHeight)\r\n      .style('fill', 'url(#topic-color-gradient)');\r\n    \r\n    // Add legend labels\r\n    legend.append('text')\r\n      .attr('x', 0)\r\n      .attr('y', legendHeight + 15)\r\n      .style('font-size', '10px')\r\n      .text('Lower');\r\n    \r\n    legend.append('text')\r\n      .attr('x', legendWidth)\r\n      .attr('y', legendHeight + 15)\r\n      .style('font-size', '10px')\r\n      .style('text-anchor', 'end')\r\n      .text('Higher');\r\n    \r\n    legend.append('text')\r\n      .attr('x', legendWidth / 2)\r\n      .attr('y', legendHeight + 15)\r\n      .style('font-size', '10px')\r\n      .style('text-anchor', 'middle')\r\n      .text(selectedMetric === 'intensity' ? 'Intensity' : 'Relevance');\r\n  };\r\n\r\n  const handleMetricChange = (metric) => {\r\n    setSelectedMetric(metric);\r\n  };\r\n\r\n  const renderActionButtons = () => (\r\n    <div className=\"chart-actions\">\r\n      <div className=\"filter-container\">\r\n        <label htmlFor=\"topic-filter\">Topic: </label>\r\n        <select \r\n          id=\"topic-filter\" \r\n          value={selectedTopic} \r\n          onChange={handleTopicChange}\r\n          className=\"filter-select\"\r\n        >\r\n          <option value=\"all\">All Topics</option>\r\n          {topics.map(topic => (\r\n            <option key={topic} value={topic}>{topic}</option>\r\n          ))}\r\n        </select>\r\n      </div>\r\n      <div className=\"metric-buttons\">\r\n        <button\r\n          className={`chart-btn ${selectedMetric === 'intensity' ? 'active' : ''}`}\r\n          onClick={() => handleMetricChange('intensity')}\r\n        >\r\n          Intensity\r\n        </button>\r\n        <button\r\n          className={`chart-btn ${selectedMetric === 'relevance' ? 'active' : ''}`}\r\n          onClick={() => handleMetricChange('relevance')}\r\n        >\r\n          Relevance\r\n        </button>\r\n      </div>\r\n    </div>\r\n  );\r\n\r\n  return (\r\n    <CardContainer \r\n      title=\"Topic Distribution TreeMap\" \r\n      actionButtons={renderActionButtons()}\r\n    >\r\n      <div ref={containerRef} style={{ width: '100%', height: '400px' }}>\r\n        {loading ? (\r\n          <Loader message=\"Loading topic data...\" />\r\n        ) : error ? (\r\n          <NoDataMessage message={error} icon=\"⚠️\" />\r\n        ) : data.length === 0 ? (\r\n          <NoDataMessage message=\"No topic data available\" />\r\n        ) : (\r\n          <svg ref={svgRef} className=\"chart-svg\"></svg>\r\n        )}\r\n      </div>\r\n    </CardContainer>\r\n  );\r\n};\r\n\r\nexport default TopicDistributionChart;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}