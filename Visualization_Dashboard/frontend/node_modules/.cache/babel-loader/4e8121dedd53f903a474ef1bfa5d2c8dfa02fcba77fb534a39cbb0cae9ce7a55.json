{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Dell\\\\OneDrive\\\\Desktop\\\\new\\\\frontend\\\\src\\\\components\\\\charts\\\\TopicDistributionChart.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useRef } from 'react';\nimport * as d3 from 'd3';\nimport api from '../../services/api';\nimport CardContainer from '../common/CardContainer';\nimport Loader from '../common/Loader';\nimport NoDataMessage from '../common/NoDataMessage';\nimport { formatNumber, truncateText, createTooltip, debounce } from '../../utils/helpers';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst TopicDistributionChart = ({\n  filters,\n  onFilterChange\n}) => {\n  _s();\n  const [data, setData] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  const [selectedMetric, setSelectedMetric] = useState('intensity'); // 'intensity' or 'relevance'\n  const [topics, setTopics] = useState([]);\n  const [selectedTopic, setSelectedTopic] = useState('all');\n  const [exactMatch, setExactMatch] = useState(false); // Added state for exact match toggle\n  const svgRef = useRef(null);\n  const containerRef = useRef(null);\n  const tooltipRef = useRef(null);\n\n  // Fetch available topics for the filter dropdown\n  useEffect(() => {\n    const fetchTopics = async () => {\n      try {\n        const filtersData = await api.getFilters();\n        setTopics(filtersData.topics || []);\n      } catch (err) {\n        console.error('Error fetching topics for filter:', err);\n      }\n    };\n    fetchTopics();\n  }, []);\n\n  // Fetch data with filters applied\n  useEffect(() => {\n    const fetchData = async () => {\n      try {\n        setLoading(true);\n        setError(null); // Reset error state when fetching new data\n\n        // Apply filters\n        const appliedFilters = {\n          ...filters\n        };\n\n        // Only add topic filter if it's not 'all'\n        if (selectedTopic !== 'all') {\n          appliedFilters.topic = selectedTopic;\n          appliedFilters.exact_match = exactMatch ? 'true' : 'false'; // Use the exactMatch state\n        }\n        console.log('Fetching topics with filters:', appliedFilters); // Debug log\n        const topicsData = await api.getTopics(appliedFilters);\n        console.log('Received topics data:', topicsData); // Debug log\n\n        if (topicsData.length === 0) {\n          // Set a more descriptive error message\n          setError(exactMatch ? `No exact matches found for topic \"${selectedTopic}\". Try disabling exact match.` : `No matches found for topic \"${selectedTopic}\"`);\n          setData([]);\n        } else {\n          // Sort by count and take top 20\n          const sortedData = topicsData.sort((a, b) => b.count - a.count).slice(0, 20);\n          setData(sortedData);\n        }\n        setLoading(false);\n      } catch (err) {\n        console.error('Error fetching topics data:', err);\n        setError('Failed to load topics data: ' + (err.message || 'Unknown error'));\n        setLoading(false);\n        setData([]);\n      }\n    };\n    fetchData();\n  }, [filters, selectedTopic, exactMatch]); // Added exactMatch to dependencies\n\n  useEffect(() => {\n    if (data.length > 0 && !loading) {\n      drawTreeMap();\n\n      // Add resize listener\n      const handleResize = debounce(() => {\n        drawTreeMap();\n      }, 300);\n      window.addEventListener('resize', handleResize);\n      return () => window.removeEventListener('resize', handleResize);\n    }\n  }, [data, loading, selectedMetric]);\n  const handleTopicChange = event => {\n    const topic = event.target.value;\n    setSelectedTopic(topic);\n\n    // If onFilterChange prop exists, call it to update parent component filters\n    if (onFilterChange) {\n      onFilterChange({\n        ...filters,\n        topic: topic !== 'all' ? topic : undefined\n      });\n    }\n  };\n  const toggleExactMatch = () => {\n    setExactMatch(!exactMatch);\n  };\n  const drawTreeMap = () => {\n    if (!svgRef.current || !containerRef.current) return;\n\n    // Clear previous chart\n    d3.select(svgRef.current).selectAll('*').remove();\n\n    // Set dimensions\n    const containerWidth = containerRef.current.clientWidth;\n    const containerHeight = containerRef.current.clientHeight || 400;\n\n    // Create SVG\n    const svg = d3.select(svgRef.current).attr('width', containerWidth).attr('height', containerHeight);\n\n    // Create tooltip if not already created\n    if (!tooltipRef.current) {\n      tooltipRef.current = createTooltip(d3);\n    }\n\n    // Prepare data hierarchy\n    const hierarchyData = {\n      name: \"Topics\",\n      children: data.map(d => ({\n        name: d.topic,\n        value: selectedMetric === 'intensity' ? d.intensity : d.relevance,\n        count: d.count,\n        intensity: d.intensity,\n        relevance: d.relevance,\n        likelihood: d.likelihood\n      }))\n    };\n\n    // Create a color scale\n    const colorScale = d3.scaleLinear().domain([0, d3.max(data, d => selectedMetric === 'intensity' ? d.intensity : d.relevance) || 1]).range(['#e0f2ff', '#0056b3']);\n\n    // Create treemap layout\n    const treemap = d3.treemap().size([containerWidth, containerHeight]).padding(4).round(true);\n\n    // Create hierarchy\n    const root = d3.hierarchy(hierarchyData).sum(d => d.value).sort((a, b) => b.value - a.value);\n\n    // Generate the treemap layout\n    treemap(root);\n\n    // Create the treemap cells with transition\n    const cells = svg.selectAll('.cell').data(root.leaves(), d => d.data.name);\n\n    // Remove exiting cells\n    cells.exit().transition().duration(500).attr('transform', d => `translate(${d.x0},${d.y0})`).attr('width', 0).attr('height', 0).remove();\n\n    // Add new cells\n    const enterCells = cells.enter().append('g').attr('class', 'cell').attr('transform', d => `translate(${d.x0},${d.y0})`).style('opacity', 0);\n\n    // Animated rectangle creation\n    enterCells.append('rect').attr('width', 0).attr('height', 0).attr('id', d => `rect-${d.data.name.replace(/\\s+/g, '-').toLowerCase()}`).attr('rx', 4).attr('ry', 4).transition().duration(800).delay((d, i) => i * 30).attr('width', d => d.x1 - d.x0).attr('height', d => d.y1 - d.y0).attr('fill', d => colorScale(d.data.value)).style('opacity', 1);\n    enterCells.transition().duration(800).delay((d, i) => i * 30).style('opacity', 1);\n\n    // Update existing cells\n    cells.transition().duration(800).attr('transform', d => `translate(${d.x0},${d.y0})`).select('rect').attr('width', d => d.x1 - d.x0).attr('height', d => d.y1 - d.y0).attr('fill', d => colorScale(d.data.value));\n\n    // Cell text\n    const allCells = svg.selectAll('.cell');\n\n    // Remove old text\n    allCells.selectAll('text').remove();\n\n    // Add new text\n    allCells.append('text').attr('class', 'topic-label').attr('x', 5).attr('y', 15).attr('fill', d => d.data.value > d3.max(data, item => selectedMetric === 'intensity' ? item.intensity : item.relevance) / 2 ? 'white' : 'black').style('font-size', '12px').style('font-weight', 'bold').style('opacity', 0).text(d => truncateText(d.data.name, Math.floor((d.x1 - d.x0) / 6))).transition().duration(800).delay((d, i) => 300 + i * 30).style('opacity', 1);\n\n    // Value text\n    allCells.append('text').attr('class', 'value-label').attr('x', 5).attr('y', 30).attr('fill', d => d.data.value > d3.max(data, item => selectedMetric === 'intensity' ? item.intensity : item.relevance) / 2 ? 'white' : 'black').style('font-size', '10px').style('opacity', 0).text(d => `${selectedMetric === 'intensity' ? 'Int' : 'Rel'}: ${formatNumber(d.data.value)}`).transition().duration(800).delay((d, i) => 400 + i * 30).style('opacity', d => d.x1 - d.x0 > 60 && d.y1 - d.y0 > 40 ? 1 : 0);\n\n    // Count text\n    allCells.append('text').attr('class', 'count-label').attr('x', 5).attr('y', 45).attr('fill', d => d.data.value > d3.max(data, item => selectedMetric === 'intensity' ? item.intensity : item.relevance) / 2 ? 'white' : 'black').style('font-size', '10px').style('opacity', 0).text(d => `Count: ${formatNumber(d.data.count)}`).transition().duration(800).delay((d, i) => 500 + i * 30).style('opacity', d => d.x1 - d.x0 > 80 && d.y1 - d.y0 > 60 ? 1 : 0);\n\n    // Add hover effects\n    allCells.on('mouseover', function (event, d) {\n      d3.select(this).select('rect').transition().duration(300).attr('stroke', '#000').attr('stroke-width', 2).style('filter', 'drop-shadow(0px 0px 6px rgba(0, 0, 0, 0.3))');\n      tooltipRef.current.style('opacity', 1).html(`\n            <strong>Topic:</strong> ${d.data.name}<br>\n            <strong>Count:</strong> ${formatNumber(d.data.count)}<br>\n            <strong>Intensity:</strong> ${formatNumber(d.data.intensity)}<br>\n            <strong>Relevance:</strong> ${formatNumber(d.data.relevance)}<br>\n            <strong>Likelihood:</strong> ${formatNumber(d.data.likelihood)}\n          `).style('left', event.pageX + 10 + 'px').style('top', event.pageY - 20 + 'px');\n    }).on('mouseout', function () {\n      d3.select(this).select('rect').transition().duration(300).attr('stroke', 'none').attr('stroke-width', 0).style('filter', 'none');\n      tooltipRef.current.style('opacity', 0);\n    });\n\n    // Add a pulsing effect to highlight top topics\n    const topCells = allCells.filter((d, i) => i < 5);\n    function pulseEffect() {\n      topCells.select('rect').transition().duration(1000).style('opacity', 0.7).transition().duration(1000).style('opacity', 1).on('end', function (d, i) {\n        if (i === 0) pulseEffect();\n      });\n    }\n    pulseEffect();\n\n    // Add a legend\n    const legendHeight = 20;\n    const legendWidth = 200;\n    const legend = svg.append('g').attr('class', 'legend').attr('transform', `translate(${containerWidth - legendWidth - 20}, 20)`);\n\n    // Create gradient for legend\n    const defs = svg.append('defs');\n    const linearGradient = defs.append('linearGradient').attr('id', 'topic-color-gradient').attr('x1', '0%').attr('y1', '0%').attr('x2', '100%').attr('y2', '0%');\n    linearGradient.append('stop').attr('offset', '0%').attr('stop-color', '#e0f2ff');\n    linearGradient.append('stop').attr('offset', '100%').attr('stop-color', '#0056b3');\n\n    // Draw legend rectangle\n    legend.append('rect').attr('width', legendWidth).attr('height', legendHeight).style('fill', 'url(#topic-color-gradient)');\n\n    // Add legend labels\n    legend.append('text').attr('x', 0).attr('y', legendHeight + 15).style('font-size', '10px').text('Lower');\n    legend.append('text').attr('x', legendWidth).attr('y', legendHeight + 15).style('font-size', '10px').style('text-anchor', 'end').text('Higher');\n    legend.append('text').attr('x', legendWidth / 2).attr('y', legendHeight + 15).style('font-size', '10px').style('text-anchor', 'middle').text(selectedMetric === 'intensity' ? 'Intensity' : 'Relevance');\n  };\n  const handleMetricChange = metric => {\n    setSelectedMetric(metric);\n  };\n  const renderActionButtons = () => /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"chart-actions\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"filter-container\",\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        htmlFor: \"topic-filter\",\n        children: \"Topic: \"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 376,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n        id: \"topic-filter\",\n        value: selectedTopic,\n        onChange: handleTopicChange,\n        className: \"filter-select\",\n        children: [/*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"all\",\n          children: \"All Topics\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 383,\n          columnNumber: 11\n        }, this), topics.map(topic => /*#__PURE__*/_jsxDEV(\"option\", {\n          value: topic,\n          children: topic\n        }, topic, false, {\n          fileName: _jsxFileName,\n          lineNumber: 385,\n          columnNumber: 13\n        }, this))]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 377,\n        columnNumber: 9\n      }, this), selectedTopic !== 'all' && /*#__PURE__*/_jsxDEV(\"label\", {\n        className: \"exact-match-toggle\",\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"checkbox\",\n          checked: exactMatch,\n          onChange: toggleExactMatch\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 392,\n          columnNumber: 13\n        }, this), \"Exact match\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 391,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 375,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"metric-buttons\",\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        className: `chart-btn ${selectedMetric === 'intensity' ? 'active' : ''}`,\n        onClick: () => handleMetricChange('intensity'),\n        children: \"Intensity\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 402,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: `chart-btn ${selectedMetric === 'relevance' ? 'active' : ''}`,\n        onClick: () => handleMetricChange('relevance'),\n        children: \"Relevance\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 408,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 401,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 374,\n    columnNumber: 5\n  }, this);\n  return /*#__PURE__*/_jsxDEV(CardContainer, {\n    title: \"Topic Distribution TreeMap\",\n    actionButtons: renderActionButtons(),\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      ref: containerRef,\n      style: {\n        width: '100%',\n        height: '400px'\n      },\n      children: loading ? /*#__PURE__*/_jsxDEV(Loader, {\n        message: \"Loading topic data...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 425,\n        columnNumber: 11\n      }, this) : error ? /*#__PURE__*/_jsxDEV(NoDataMessage, {\n        message: error,\n        icon: \"\\u26A0\\uFE0F\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 427,\n        columnNumber: 11\n      }, this) : data.length === 0 ? /*#__PURE__*/_jsxDEV(NoDataMessage, {\n        message: \"No topic data available\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 429,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(\"svg\", {\n        ref: svgRef,\n        className: \"chart-svg\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 431,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 423,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 419,\n    columnNumber: 5\n  }, this);\n};\n_s(TopicDistributionChart, \"F9pc3lFyNmx6t5eT14GgxM7urEM=\");\n_c = TopicDistributionChart;\nexport default TopicDistributionChart;\nvar _c;\n$RefreshReg$(_c, \"TopicDistributionChart\");","map":{"version":3,"names":["React","useState","useEffect","useRef","d3","api","CardContainer","Loader","NoDataMessage","formatNumber","truncateText","createTooltip","debounce","jsxDEV","_jsxDEV","TopicDistributionChart","filters","onFilterChange","_s","data","setData","loading","setLoading","error","setError","selectedMetric","setSelectedMetric","topics","setTopics","selectedTopic","setSelectedTopic","exactMatch","setExactMatch","svgRef","containerRef","tooltipRef","fetchTopics","filtersData","getFilters","err","console","fetchData","appliedFilters","topic","exact_match","log","topicsData","getTopics","length","sortedData","sort","a","b","count","slice","message","drawTreeMap","handleResize","window","addEventListener","removeEventListener","handleTopicChange","event","target","value","undefined","toggleExactMatch","current","select","selectAll","remove","containerWidth","clientWidth","containerHeight","clientHeight","svg","attr","hierarchyData","name","children","map","d","intensity","relevance","likelihood","colorScale","scaleLinear","domain","max","range","treemap","size","padding","round","root","hierarchy","sum","cells","leaves","exit","transition","duration","x0","y0","enterCells","enter","append","style","replace","toLowerCase","delay","i","x1","y1","allCells","item","text","Math","floor","on","html","pageX","pageY","topCells","filter","pulseEffect","legendHeight","legendWidth","legend","defs","linearGradient","handleMetricChange","metric","renderActionButtons","className","htmlFor","fileName","_jsxFileName","lineNumber","columnNumber","id","onChange","type","checked","onClick","title","actionButtons","ref","width","height","icon","_c","$RefreshReg$"],"sources":["C:/Users/Dell/OneDrive/Desktop/new/frontend/src/components/charts/TopicDistributionChart.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\r\nimport * as d3 from 'd3';\r\nimport api from '../../services/api';\r\nimport CardContainer from '../common/CardContainer';\r\nimport Loader from '../common/Loader';\r\nimport NoDataMessage from '../common/NoDataMessage';\r\nimport { formatNumber, truncateText, createTooltip, debounce } from '../../utils/helpers';\r\n\r\nconst TopicDistributionChart = ({ filters, onFilterChange }) => {\r\n  const [data, setData] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState(null);\r\n  const [selectedMetric, setSelectedMetric] = useState('intensity'); // 'intensity' or 'relevance'\r\n  const [topics, setTopics] = useState([]);\r\n  const [selectedTopic, setSelectedTopic] = useState('all');\r\n  const [exactMatch, setExactMatch] = useState(false);  // Added state for exact match toggle\r\n  const svgRef = useRef(null);\r\n  const containerRef = useRef(null);\r\n  const tooltipRef = useRef(null);\r\n\r\n  // Fetch available topics for the filter dropdown\r\n  useEffect(() => {\r\n    const fetchTopics = async () => {\r\n      try {\r\n        const filtersData = await api.getFilters();\r\n        setTopics(filtersData.topics || []);\r\n      } catch (err) {\r\n        console.error('Error fetching topics for filter:', err);\r\n      }\r\n    };\r\n\r\n    fetchTopics();\r\n  }, []);\r\n\r\n  // Fetch data with filters applied\r\n  useEffect(() => {\r\n    const fetchData = async () => {\r\n      try {\r\n        setLoading(true);\r\n        setError(null);  // Reset error state when fetching new data\r\n        \r\n        // Apply filters\r\n        const appliedFilters = {\r\n          ...filters\r\n        };\r\n        \r\n        // Only add topic filter if it's not 'all'\r\n        if (selectedTopic !== 'all') {\r\n          appliedFilters.topic = selectedTopic;\r\n          appliedFilters.exact_match = exactMatch ? 'true' : 'false';  // Use the exactMatch state\r\n        }\r\n        \r\n        console.log('Fetching topics with filters:', appliedFilters);  // Debug log\r\n        const topicsData = await api.getTopics(appliedFilters);\r\n        console.log('Received topics data:', topicsData);  // Debug log\r\n        \r\n        if (topicsData.length === 0) {\r\n          // Set a more descriptive error message\r\n          setError(exactMatch \r\n            ? `No exact matches found for topic \"${selectedTopic}\". Try disabling exact match.` \r\n            : `No matches found for topic \"${selectedTopic}\"`\r\n          );\r\n          setData([]);\r\n        } else {\r\n          // Sort by count and take top 20\r\n          const sortedData = topicsData\r\n            .sort((a, b) => b.count - a.count)\r\n            .slice(0, 20);\r\n          \r\n          setData(sortedData);\r\n        }\r\n        \r\n        setLoading(false);\r\n      } catch (err) {\r\n        console.error('Error fetching topics data:', err);\r\n        setError('Failed to load topics data: ' + (err.message || 'Unknown error'));\r\n        setLoading(false);\r\n        setData([]);\r\n      }\r\n    };\r\n  \r\n    fetchData();\r\n  }, [filters, selectedTopic, exactMatch]);  // Added exactMatch to dependencies\r\n\r\n  useEffect(() => {\r\n    if (data.length > 0 && !loading) {\r\n      drawTreeMap();\r\n      \r\n      // Add resize listener\r\n      const handleResize = debounce(() => {\r\n        drawTreeMap();\r\n      }, 300);\r\n      \r\n      window.addEventListener('resize', handleResize);\r\n      return () => window.removeEventListener('resize', handleResize);\r\n    }\r\n  }, [data, loading, selectedMetric]);\r\n\r\n  const handleTopicChange = (event) => {\r\n    const topic = event.target.value;\r\n    setSelectedTopic(topic);\r\n    \r\n    // If onFilterChange prop exists, call it to update parent component filters\r\n    if (onFilterChange) {\r\n      onFilterChange({\r\n        ...filters,\r\n        topic: topic !== 'all' ? topic : undefined\r\n      });\r\n    }\r\n  };\r\n\r\n  const toggleExactMatch = () => {\r\n    setExactMatch(!exactMatch);\r\n  };\r\n\r\n  const drawTreeMap = () => {\r\n    if (!svgRef.current || !containerRef.current) return;\r\n\r\n    // Clear previous chart\r\n    d3.select(svgRef.current).selectAll('*').remove();\r\n\r\n    // Set dimensions\r\n    const containerWidth = containerRef.current.clientWidth;\r\n    const containerHeight = containerRef.current.clientHeight || 400;\r\n    \r\n    // Create SVG\r\n    const svg = d3.select(svgRef.current)\r\n      .attr('width', containerWidth)\r\n      .attr('height', containerHeight);\r\n\r\n    // Create tooltip if not already created\r\n    if (!tooltipRef.current) {\r\n      tooltipRef.current = createTooltip(d3);\r\n    }\r\n\r\n    // Prepare data hierarchy\r\n    const hierarchyData = {\r\n      name: \"Topics\",\r\n      children: data.map(d => ({\r\n        name: d.topic,\r\n        value: selectedMetric === 'intensity' ? d.intensity : d.relevance,\r\n        count: d.count,\r\n        intensity: d.intensity,\r\n        relevance: d.relevance,\r\n        likelihood: d.likelihood\r\n      }))\r\n    };\r\n\r\n    // Create a color scale\r\n    const colorScale = d3.scaleLinear()\r\n      .domain([0, d3.max(data, d => selectedMetric === 'intensity' ? d.intensity : d.relevance) || 1])\r\n      .range(['#e0f2ff', '#0056b3']);\r\n\r\n    // Create treemap layout\r\n    const treemap = d3.treemap()\r\n      .size([containerWidth, containerHeight])\r\n      .padding(4)\r\n      .round(true);\r\n\r\n    // Create hierarchy\r\n    const root = d3.hierarchy(hierarchyData)\r\n      .sum(d => d.value)\r\n      .sort((a, b) => b.value - a.value);\r\n\r\n    // Generate the treemap layout\r\n    treemap(root);\r\n\r\n    // Create the treemap cells with transition\r\n    const cells = svg.selectAll('.cell')\r\n      .data(root.leaves(), d => d.data.name);\r\n    \r\n    // Remove exiting cells\r\n    cells.exit().transition().duration(500)\r\n      .attr('transform', d => `translate(${d.x0},${d.y0})`)\r\n      .attr('width', 0)\r\n      .attr('height', 0)\r\n      .remove();\r\n    \r\n    // Add new cells\r\n    const enterCells = cells.enter()\r\n      .append('g')\r\n      .attr('class', 'cell')\r\n      .attr('transform', d => `translate(${d.x0},${d.y0})`)\r\n      .style('opacity', 0);\r\n    \r\n    // Animated rectangle creation\r\n    enterCells.append('rect')\r\n      .attr('width', 0)\r\n      .attr('height', 0)\r\n      .attr('id', d => `rect-${d.data.name.replace(/\\s+/g, '-').toLowerCase()}`)\r\n      .attr('rx', 4)\r\n      .attr('ry', 4)\r\n      .transition()\r\n      .duration(800)\r\n      .delay((d, i) => i * 30)\r\n      .attr('width', d => d.x1 - d.x0)\r\n      .attr('height', d => d.y1 - d.y0)\r\n      .attr('fill', d => colorScale(d.data.value))\r\n      .style('opacity', 1);\r\n    \r\n    enterCells\r\n      .transition()\r\n      .duration(800)\r\n      .delay((d, i) => i * 30)\r\n      .style('opacity', 1);\r\n    \r\n    // Update existing cells\r\n    cells.transition()\r\n      .duration(800)\r\n      .attr('transform', d => `translate(${d.x0},${d.y0})`)\r\n      .select('rect')\r\n      .attr('width', d => d.x1 - d.x0)\r\n      .attr('height', d => d.y1 - d.y0)\r\n      .attr('fill', d => colorScale(d.data.value));\r\n    \r\n    // Cell text\r\n    const allCells = svg.selectAll('.cell');\r\n    \r\n    // Remove old text\r\n    allCells.selectAll('text').remove();\r\n    \r\n    // Add new text\r\n    allCells.append('text')\r\n      .attr('class', 'topic-label')\r\n      .attr('x', 5)\r\n      .attr('y', 15)\r\n      .attr('fill', d => d.data.value > d3.max(data, item => selectedMetric === 'intensity' ? item.intensity : item.relevance) / 2 ? 'white' : 'black')\r\n      .style('font-size', '12px')\r\n      .style('font-weight', 'bold')\r\n      .style('opacity', 0)\r\n      .text(d => truncateText(d.data.name, Math.floor((d.x1 - d.x0) / 6)))\r\n      .transition()\r\n      .duration(800)\r\n      .delay((d, i) => 300 + i * 30)\r\n      .style('opacity', 1);\r\n    \r\n    // Value text\r\n    allCells.append('text')\r\n      .attr('class', 'value-label')\r\n      .attr('x', 5)\r\n      .attr('y', 30)\r\n      .attr('fill', d => d.data.value > d3.max(data, item => selectedMetric === 'intensity' ? item.intensity : item.relevance) / 2 ? 'white' : 'black')\r\n      .style('font-size', '10px')\r\n      .style('opacity', 0)\r\n      .text(d => `${selectedMetric === 'intensity' ? 'Int' : 'Rel'}: ${formatNumber(d.data.value)}`)\r\n      .transition()\r\n      .duration(800)\r\n      .delay((d, i) => 400 + i * 30)\r\n      .style('opacity', d => (d.x1 - d.x0 > 60 && d.y1 - d.y0 > 40) ? 1 : 0);\r\n    \r\n    // Count text\r\n    allCells.append('text')\r\n      .attr('class', 'count-label')\r\n      .attr('x', 5)\r\n      .attr('y', 45)\r\n      .attr('fill', d => d.data.value > d3.max(data, item => selectedMetric === 'intensity' ? item.intensity : item.relevance) / 2 ? 'white' : 'black')\r\n      .style('font-size', '10px')\r\n      .style('opacity', 0)\r\n      .text(d => `Count: ${formatNumber(d.data.count)}`)\r\n      .transition()\r\n      .duration(800)\r\n      .delay((d, i) => 500 + i * 30)\r\n      .style('opacity', d => (d.x1 - d.x0 > 80 && d.y1 - d.y0 > 60) ? 1 : 0);\r\n    \r\n    // Add hover effects\r\n    allCells\r\n      .on('mouseover', function(event, d) {\r\n        d3.select(this).select('rect')\r\n          .transition()\r\n          .duration(300)\r\n          .attr('stroke', '#000')\r\n          .attr('stroke-width', 2)\r\n          .style('filter', 'drop-shadow(0px 0px 6px rgba(0, 0, 0, 0.3))');\r\n        \r\n        tooltipRef.current\r\n          .style('opacity', 1)\r\n          .html(`\r\n            <strong>Topic:</strong> ${d.data.name}<br>\r\n            <strong>Count:</strong> ${formatNumber(d.data.count)}<br>\r\n            <strong>Intensity:</strong> ${formatNumber(d.data.intensity)}<br>\r\n            <strong>Relevance:</strong> ${formatNumber(d.data.relevance)}<br>\r\n            <strong>Likelihood:</strong> ${formatNumber(d.data.likelihood)}\r\n          `)\r\n          .style('left', (event.pageX + 10) + 'px')\r\n          .style('top', (event.pageY - 20) + 'px');\r\n      })\r\n      .on('mouseout', function() {\r\n        d3.select(this).select('rect')\r\n          .transition()\r\n          .duration(300)\r\n          .attr('stroke', 'none')\r\n          .attr('stroke-width', 0)\r\n          .style('filter', 'none');\r\n        \r\n        tooltipRef.current.style('opacity', 0);\r\n      });\r\n    \r\n    // Add a pulsing effect to highlight top topics\r\n    const topCells = allCells.filter((d, i) => i < 5);\r\n    \r\n    function pulseEffect() {\r\n      topCells.select('rect')\r\n        .transition()\r\n        .duration(1000)\r\n        .style('opacity', 0.7)\r\n        .transition()\r\n        .duration(1000)\r\n        .style('opacity', 1)\r\n        .on('end', function(d, i) {\r\n          if (i === 0) pulseEffect();\r\n        });\r\n    }\r\n    \r\n    pulseEffect();\r\n    \r\n    // Add a legend\r\n    const legendHeight = 20;\r\n    const legendWidth = 200;\r\n    \r\n    const legend = svg.append('g')\r\n      .attr('class', 'legend')\r\n      .attr('transform', `translate(${containerWidth - legendWidth - 20}, 20)`);\r\n    \r\n    // Create gradient for legend\r\n    const defs = svg.append('defs');\r\n    const linearGradient = defs.append('linearGradient')\r\n      .attr('id', 'topic-color-gradient')\r\n      .attr('x1', '0%')\r\n      .attr('y1', '0%')\r\n      .attr('x2', '100%')\r\n      .attr('y2', '0%');\r\n    \r\n    linearGradient.append('stop')\r\n      .attr('offset', '0%')\r\n      .attr('stop-color', '#e0f2ff');\r\n    \r\n    linearGradient.append('stop')\r\n      .attr('offset', '100%')\r\n      .attr('stop-color', '#0056b3');\r\n    \r\n    // Draw legend rectangle\r\n    legend.append('rect')\r\n      .attr('width', legendWidth)\r\n      .attr('height', legendHeight)\r\n      .style('fill', 'url(#topic-color-gradient)');\r\n    \r\n    // Add legend labels\r\n    legend.append('text')\r\n      .attr('x', 0)\r\n      .attr('y', legendHeight + 15)\r\n      .style('font-size', '10px')\r\n      .text('Lower');\r\n    \r\n    legend.append('text')\r\n      .attr('x', legendWidth)\r\n      .attr('y', legendHeight + 15)\r\n      .style('font-size', '10px')\r\n      .style('text-anchor', 'end')\r\n      .text('Higher');\r\n    \r\n    legend.append('text')\r\n      .attr('x', legendWidth / 2)\r\n      .attr('y', legendHeight + 15)\r\n      .style('font-size', '10px')\r\n      .style('text-anchor', 'middle')\r\n      .text(selectedMetric === 'intensity' ? 'Intensity' : 'Relevance');\r\n  };\r\n\r\n  const handleMetricChange = (metric) => {\r\n    setSelectedMetric(metric);\r\n  };\r\n\r\n  const renderActionButtons = () => (\r\n    <div className=\"chart-actions\">\r\n      <div className=\"filter-container\">\r\n        <label htmlFor=\"topic-filter\">Topic: </label>\r\n        <select \r\n          id=\"topic-filter\" \r\n          value={selectedTopic} \r\n          onChange={handleTopicChange}\r\n          className=\"filter-select\"\r\n        >\r\n          <option value=\"all\">All Topics</option>\r\n          {topics.map(topic => (\r\n            <option key={topic} value={topic}>{topic}</option>\r\n          ))}\r\n        </select>\r\n        \r\n        {/* Add exact match toggle */}\r\n        {selectedTopic !== 'all' && (\r\n          <label className=\"exact-match-toggle\">\r\n            <input\r\n              type=\"checkbox\"\r\n              checked={exactMatch}\r\n              onChange={toggleExactMatch}\r\n            />\r\n            Exact match\r\n          </label>\r\n        )}\r\n      </div>\r\n      <div className=\"metric-buttons\">\r\n        <button\r\n          className={`chart-btn ${selectedMetric === 'intensity' ? 'active' : ''}`}\r\n          onClick={() => handleMetricChange('intensity')}\r\n        >\r\n          Intensity\r\n        </button>\r\n        <button\r\n          className={`chart-btn ${selectedMetric === 'relevance' ? 'active' : ''}`}\r\n          onClick={() => handleMetricChange('relevance')}\r\n        >\r\n          Relevance\r\n        </button>\r\n      </div>\r\n    </div>\r\n  );\r\n\r\n  return (\r\n    <CardContainer \r\n      title=\"Topic Distribution TreeMap\" \r\n      actionButtons={renderActionButtons()}\r\n    >\r\n      <div ref={containerRef} style={{ width: '100%', height: '400px' }}>\r\n        {loading ? (\r\n          <Loader message=\"Loading topic data...\" />\r\n        ) : error ? (\r\n          <NoDataMessage message={error} icon=\"⚠️\" />\r\n        ) : data.length === 0 ? (\r\n          <NoDataMessage message=\"No topic data available\" />\r\n        ) : (\r\n          <svg ref={svgRef} className=\"chart-svg\"></svg>\r\n        )}\r\n      </div>\r\n    </CardContainer>\r\n  );\r\n};\r\n\r\nexport default TopicDistributionChart;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}